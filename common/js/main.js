!function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this.drag=a.extend({},m),this.state=a.extend({},n),this.e=a.extend({},o),this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._invalidated={},this._pipe=[],a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a[0].toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Pipe,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}function f(a){if(a.touches!==d)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(a.touches===d){if(a.pageX!==d)return{x:a.pageX,y:a.pageY};if(a.pageX===d)return{x:a.clientX,y:a.clientY}}}function g(a){var b,d,e=c.createElement("div"),f=a;for(b in f)if(d=f[b],"undefined"!=typeof e.style[d])return e=null,[d,b];return[!1]}function h(){return g(["transition","WebkitTransition","MozTransition","OTransition"])[1]}function i(){return g(["transform","WebkitTransform","MozTransform","OTransform","msTransform"])[0]}function j(){return g(["perspective","webkitPerspective","MozPerspective","OPerspective","MsPerspective"])[0]}function k(){return"ontouchstart"in b||!!navigator.msMaxTouchPoints}function l(){return b.navigator.msPointerEnabled}var m,n,o;m={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,offsetX:0,offsetY:0,distance:null,startTime:0,endTime:0,updatedX:0,targetEl:null},n={isTouch:!1,isScrolling:!1,isSwiping:!1,direction:!1,inMotion:!1},o={_onDragStart:null,_onDragMove:null,_onDragEnd:null,_transitionEnd:null,_resizer:null,_responsiveCall:null,_goToLoop:null,_checkVisibile:null},e.Defaults={items:3,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,responsiveClass:!1,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",themeClass:"owl-theme",baseClass:"owl-carousel",itemClass:"owl-item",centerClass:"center",activeClass:"active"},e.Width={Default:"default",Inner:"inner",Outer:"outer"},e.Plugins={},e.Pipe=[{filter:["width","items","settings"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){var a=this._clones,b=this.$stage.children(".cloned");(b.length!==a.length||!this.settings.loop&&a.length>0)&&(this.$stage.children(".cloned").remove(),this._clones=[])}},{filter:["items","settings"],run:function(){var a,b,c=this._clones,d=this._items,e=this.settings.loop?c.length-Math.max(2*this.settings.items,4):0;for(a=0,b=Math.abs(e/2);b>a;a++)e>0?(this.$stage.children().eq(d.length+c.length-1).remove(),c.pop(),this.$stage.children().eq(0).remove(),c.pop()):(c.push(c.length/2),this.$stage.append(d[c[c.length-1]].clone().addClass("cloned")),c.push(d.length-1-(c.length-1)/2),this.$stage.prepend(d[c[c.length-1]].clone().addClass("cloned")))}},{filter:["width","items","settings"],run:function(){var a,b,c,d=this.settings.rtl?1:-1,e=(this.width()/this.settings.items).toFixed(3),f=0;for(this._coordinates=[],b=0,c=this._clones.length+this._items.length;c>b;b++)a=this._mergers[this.relative(b)],a=this.settings.mergeFit&&Math.min(a,this.settings.items)||a,f+=(this.settings.autoWidth?this._items[this.relative(b)].width()+this.settings.margin:e*a)*d,this._coordinates.push(f)}},{filter:["width","items","settings"],run:function(){var b,c,d=(this.width()/this.settings.items).toFixed(3),e={width:Math.abs(this._coordinates[this._coordinates.length-1])+2*this.settings.stagePadding,"padding-left":this.settings.stagePadding||"","padding-right":this.settings.stagePadding||""};if(this.$stage.css(e),e={width:this.settings.autoWidth?"auto":d-this.settings.margin},e[this.settings.rtl?"margin-left":"margin-right"]=this.settings.margin,!this.settings.autoWidth&&a.grep(this._mergers,function(a){return a>1}).length>0)for(b=0,c=this._coordinates.length;c>b;b++)e.width=Math.abs(this._coordinates[b])-Math.abs(this._coordinates[b-1]||0)-this.settings.margin,this.$stage.children().eq(b).css(e);else this.$stage.children().css(e)}},{filter:["width","items","settings"],run:function(a){a.current&&this.reset(this.$stage.children().index(a.current))}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;d>c;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,"<=",g)&&this.op(a,">",h)||this.op(b,"<",g)&&this.op(b,">",h))&&i.push(c);this.$stage.children("."+this.settings.activeClass).removeClass(this.settings.activeClass),this.$stage.children(":eq("+i.join("), :eq(")+")").addClass(this.settings.activeClass),this.settings.center&&(this.$stage.children("."+this.settings.centerClass).removeClass(this.settings.centerClass),this.$stage.children().eq(this.current()).addClass(this.settings.centerClass))}}],e.prototype.initialize=function(){if(this.trigger("initialize"),this.$element.addClass(this.settings.baseClass).addClass(this.settings.themeClass).toggleClass("owl-rtl",this.settings.rtl),this.browserSupport(),this.settings.autoWidth&&this.state.imagesLoaded!==!0){var b,c,e;if(b=this.$element.find("img"),c=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:d,e=this.$element.children(c).width(),b.length&&0>=e)return this.preloadAutoWidthImages(b),!1}this.$element.addClass("owl-loading"),this.$stage=a("<"+this.settings.stageElement+' class="owl-stage"/>').wrap('<div class="owl-stage-outer">'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this._width=this.$element.width(),this.refresh(),this.$element.removeClass("owl-loading").addClass("owl-loaded"),this.eventsCall(),this.internalEvents(),this.addTriggerableEvents(),this.trigger("initialized")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){b>=a&&a>d&&(d=Number(a))}),e=a.extend({},this.options,c[d]),delete e.responsive,e.responsiveClass&&this.$element.attr("class",function(a,b){return b.replace(/\b owl-responsive-\S+/g,"")}).addClass("owl-responsive-"+d)):e=a.extend({},this.options),(null===this.settings||this._breakpoint!==d)&&(this.trigger("change",{property:{name:"settings",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}}))},e.prototype.optionsLogic=function(){this.$element.toggleClass("owl-center",this.settings.center),this.settings.loop&&this._items.length<this.settings.items&&(this.settings.loop=!1),this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger("prepare",{content:b});return c.data||(c.data=a("<"+this.settings.itemElement+"/>").addClass(this.settings.itemClass).append(b)),this.trigger("prepared",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};c>b;)(this._invalidated.all||a.grep(this._pipe[b].filter,d).length>0)&&this._pipe[b].run(e),b++;this._invalidated={}},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){if(0===this._items.length)return!1;(new Date).getTime();this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$stage.addClass("owl-refresh"),this.update(),this.$stage.removeClass("owl-refresh"),this.state.orientation=b.orientation,this.watchVisibility(),this.trigger("refreshed")},e.prototype.eventsCall=function(){this.e._onDragStart=a.proxy(function(a){this.onDragStart(a)},this),this.e._onDragMove=a.proxy(function(a){this.onDragMove(a)},this),this.e._onDragEnd=a.proxy(function(a){this.onDragEnd(a)},this),this.e._onResize=a.proxy(function(a){this.onResize(a)},this),this.e._transitionEnd=a.proxy(function(a){this.transitionEnd(a)},this),this.e._preventClick=a.proxy(function(a){this.preventClick(a)},this)},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this.e._onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return this._items.length?this._width===this.$element.width()?!1:this.trigger("resize").isDefaultPrevented()?!1:(this._width=this.$element.width(),this.invalidate("width"),this.refresh(),void this.trigger("resized")):!1},e.prototype.eventsRouter=function(a){var b=a.type;"mousedown"===b||"touchstart"===b?this.onDragStart(a):"mousemove"===b||"touchmove"===b?this.onDragMove(a):"mouseup"===b||"touchend"===b?this.onDragEnd(a):"touchcancel"===b&&this.onDragEnd(a)},e.prototype.internalEvents=function(){var c=(k(),l());this.settings.mouseDrag?(this.$stage.on("mousedown",a.proxy(function(a){this.eventsRouter(a)},this)),this.$stage.on("dragstart",function(){return!1}),this.$stage.get(0).onselectstart=function(){return!1}):this.$element.addClass("owl-text-select-on"),this.settings.touchDrag&&!c&&this.$stage.on("touchstart touchcancel",a.proxy(function(a){this.eventsRouter(a)},this)),this.transitionEndVendor&&this.on(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd,!1),this.settings.responsive!==!1&&this.on(b,"resize",a.proxy(this.onThrottledResize,this))},e.prototype.onDragStart=function(d){var e,g,h,i;if(e=d.originalEvent||d||b.event,3===e.which||this.state.isTouch)return!1;if("mousedown"===e.type&&this.$stage.addClass("owl-grab"),this.trigger("drag"),this.drag.startTime=(new Date).getTime(),this.speed(0),this.state.isTouch=!0,this.state.isScrolling=!1,this.state.isSwiping=!1,this.drag.distance=0,g=f(e).x,h=f(e).y,this.drag.offsetX=this.$stage.position().left,this.drag.offsetY=this.$stage.position().top,this.settings.rtl&&(this.drag.offsetX=this.$stage.position().left+this.$stage.width()-this.width()+this.settings.margin),this.state.inMotion&&this.support3d)i=this.getTransformProperty(),this.drag.offsetX=i,this.animate(i),this.state.inMotion=!0;else if(this.state.inMotion&&!this.support3d)return this.state.inMotion=!1,!1;this.drag.startX=g-this.drag.offsetX,this.drag.startY=h-this.drag.offsetY,this.drag.start=g-this.drag.startX,this.drag.targetEl=e.target||e.srcElement,this.drag.updatedX=this.drag.start,("IMG"===this.drag.targetEl.tagName||"A"===this.drag.targetEl.tagName)&&(this.drag.targetEl.draggable=!1),a(c).on("mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents",a.proxy(function(a){this.eventsRouter(a)},this))},e.prototype.onDragMove=function(a){var c,e,g,h,i,j;this.state.isTouch&&(this.state.isScrolling||(c=a.originalEvent||a||b.event,e=f(c).x,g=f(c).y,this.drag.currentX=e-this.drag.startX,this.drag.currentY=g-this.drag.startY,this.drag.distance=this.drag.currentX-this.drag.offsetX,this.drag.distance<0?this.state.direction=this.settings.rtl?"right":"left":this.drag.distance>0&&(this.state.direction=this.settings.rtl?"left":"right"),this.settings.loop?this.op(this.drag.currentX,">",this.coordinates(this.minimum()))&&"right"===this.state.direction?this.drag.currentX-=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length):this.op(this.drag.currentX,"<",this.coordinates(this.maximum()))&&"left"===this.state.direction&&(this.drag.currentX+=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length)):(h=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),i=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),j=this.settings.pullDrag?this.drag.distance/5:0,this.drag.currentX=Math.max(Math.min(this.drag.currentX,h+j),i+j)),(this.drag.distance>8||this.drag.distance<-8)&&(c.preventDefault!==d?c.preventDefault():c.returnValue=!1,this.state.isSwiping=!0),this.drag.updatedX=this.drag.currentX,(this.drag.currentY>16||this.drag.currentY<-16)&&this.state.isSwiping===!1&&(this.state.isScrolling=!0,this.drag.updatedX=this.drag.start),this.animate(this.drag.updatedX)))},e.prototype.onDragEnd=function(b){var d,e,f;if(this.state.isTouch){if("mouseup"===b.type&&this.$stage.removeClass("owl-grab"),this.trigger("dragged"),this.drag.targetEl.removeAttribute("draggable"),this.state.isTouch=!1,this.state.isScrolling=!1,this.state.isSwiping=!1,0===this.drag.distance&&this.state.inMotion!==!0)return this.state.inMotion=!1,!1;this.drag.endTime=(new Date).getTime(),d=this.drag.endTime-this.drag.startTime,e=Math.abs(this.drag.distance),(e>3||d>300)&&this.removeClick(this.drag.targetEl),f=this.closest(this.drag.updatedX),this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(f),this.invalidate("position"),this.update(),this.settings.pullDrag||this.drag.updatedX!==this.coordinates(f)||this.transitionEnd(),this.drag.distance=0,a(c).off(".owl.dragEvents")}},e.prototype.removeClick=function(c){this.drag.targetEl=c,a(c).on("click.preventClick",this.e._preventClick),b.setTimeout(function(){a(c).off("click.preventClick")},300)},e.prototype.preventClick=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation&&b.stopPropagation(),a(b.target).off("click.preventClick")},e.prototype.getTransformProperty=function(){var a,c;return a=b.getComputedStyle(this.$stage.get(0),null).getPropertyValue(this.vendorName+"transform"),a=a.replace(/matrix(3d)?\(|\)/g,"").split(","),c=16===a.length,c!==!0?a[4]:a[12]},e.prototype.closest=function(b){var c=-1,d=30,e=this.width(),f=this.coordinates();return this.settings.freeDrag||a.each(f,a.proxy(function(a,g){return b>g-d&&g+d>b?c=a:this.op(b,"<",g)&&this.op(b,">",f[a+1]||g-e)&&(c="left"===this.state.direction?a+1:a),-1===c},this)),this.settings.loop||(this.op(b,">",f[this.minimum()])?c=b=this.minimum():this.op(b,"<",f[this.maximum()])&&(c=b=this.maximum())),c},e.prototype.animate=function(b){this.trigger("translate"),this.state.inMotion=this.speed()>0,this.support3d?this.$stage.css({transform:"translate3d("+b+"px,0px, 0px)",transition:this.speed()/1e3+"s"}):this.state.isTouch?this.$stage.css({left:b+"px"}):this.$stage.animate({left:b},this.speed()/1e3,this.settings.fallbackEasing,a.proxy(function(){this.state.inMotion&&this.transitionEnd()},this))},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},e.prototype.invalidate=function(a){this._invalidated[a]=!0},e.prototype.reset=function(a){a=this.normalize(a),a!==d&&(this._speed=0,this._current=a,this.suppress(["translate","translated"]),this.animate(this.coordinates(a)),this.release(["translate","translated"]))},e.prototype.normalize=function(b,c){var e=c?this._items.length:this._items.length+this._clones.length;return!a.isNumeric(b)||1>e?d:b=this._clones.length?(b%e+e)%e:Math.max(this.minimum(c),Math.min(this.maximum(c),b))},e.prototype.relative=function(a){return a=this.normalize(a),a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=0,f=this.settings;if(a)return this._items.length-1;if(!f.loop&&f.center)b=this._items.length-1;else if(f.loop||f.center)if(f.loop||f.center)b=this._items.length+f.items;else{if(!f.autoWidth&&!f.merge)throw"Can not detect maximum absolute position.";for(revert=f.rtl?1:-1,c=this.$stage.width()-this.$element.width();(d=this.coordinates(e))&&!(d*revert>=c);)b=++e}else b=this._items.length-f.items;return b},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2===0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c=null;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[b-1]||0))/2*(this.settings.rtl?-1:1)):c=this._coordinates[b-1]||0,c)},e.prototype.duration=function(a,b,c){return Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(c,d){if(this.settings.loop){var e=c-this.relative(this.current()),f=this.current(),g=this.current(),h=this.current()+e,i=0>g-h?!0:!1,j=this._clones.length+this._items.length;h<this.settings.items&&i===!1?(f=g+this._items.length,this.reset(f)):h>=j-this.settings.items&&i===!0&&(f=g-this._items.length,this.reset(f)),b.clearTimeout(this.e._goToLoop),this.e._goToLoop=b.setTimeout(a.proxy(function(){this.speed(this.duration(this.current(),f+e,d)),this.current(f+e),this.update()},this),30)}else this.speed(this.duration(this.current(),c,d)),this.current(c),this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.transitionEnd=function(a){return a!==d&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0))?!1:(this.state.inMotion=!1,void this.trigger("translated"))},e.prototype.viewport=function(){var d;if(this.options.responsiveBaseElement!==b)d=a(this.options.responsiveBaseElement).width();else if(b.innerWidth)d=b.innerWidth;else{if(!c.documentElement||!c.documentElement.clientWidth)throw"Can not detect viewport width.";d=c.documentElement.clientWidth}return d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find("."+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)},this)),this.reset(a.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},e.prototype.add=function(a,b){b=b===d?this._items.length:this.normalize(b,!0),this.trigger("add",{content:a,position:b}),0===this._items.length||b===this._items.length?(this.$stage.append(a),this._items.push(a),this._mergers.push(1*a.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)):(this._items[b].before(a),this._items.splice(b,0,a),this._mergers.splice(b,0,1*a.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)),this.invalidate("items"),this.trigger("added",{content:a,position:b})},e.prototype.remove=function(a){a=this.normalize(a,!0),a!==d&&(this.trigger("remove",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate("items"),this.trigger("removed",{content:null,position:a}))},e.prototype.addTriggerableEvents=function(){var b=a.proxy(function(b,c){return a.proxy(function(a){a.relatedTarget!==this&&(this.suppress([c]),b.apply(this,[].slice.call(arguments,1)),this.release([c]))},this)},this);a.each({next:this.next,prev:this.prev,to:this.to,destroy:this.destroy,refresh:this.refresh,replace:this.replace,add:this.add,remove:this.remove},a.proxy(function(a,c){this.$element.on(a+".owl.carousel",b(c,a+".owl.carousel"))},this))},e.prototype.watchVisibility=function(){function c(a){return a.offsetWidth>0&&a.offsetHeight>0}function d(){c(this.$element.get(0))&&(this.$element.removeClass("owl-hidden"),this.refresh(),b.clearInterval(this.e._checkVisibile))}c(this.$element.get(0))||(this.$element.addClass("owl-hidden"),b.clearInterval(this.e._checkVisibile),this.e._checkVisibile=b.setInterval(a.proxy(d,this),500))},e.prototype.preloadAutoWidthImages=function(b){var c,d,e,f;c=0,d=this,b.each(function(g,h){e=a(h),f=new Image,f.onload=function(){c++,e.attr("src",f.src),e.css("opacity",1),c>=b.length&&(d.state.imagesLoaded=!0,d.initialize())},f.src=e.attr("src")||e.attr("data-src")||e.attr("data-src-retina")})},e.prototype.destroy=function(){this.$element.hasClass(this.settings.themeClass)&&this.$element.removeClass(this.settings.themeClass),this.settings.responsive!==!1&&a(b).off("resize.owl.carousel"),this.transitionEndVendor&&this.off(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd);for(var d in this._plugins)this._plugins[d].destroy();(this.settings.mouseDrag||this.settings.touchDrag)&&(this.$stage.off("mousedown touchstart touchcancel"),a(c).off(".owl.dragEvents"),this.$stage.get(0).onselectstart=function(){},this.$stage.off("dragstart",function(){return!1})),this.$element.off(".owl"),this.$stage.children(".cloned").remove(),this.e=null,this.$element.removeData("owlCarousel"),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.unwrap()},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case"<":return d?a>c:c>a;case">":return d?c>a:a>c;case">=":return d?c>=a:a>=c;case"<=":return d?a>=c:c>=a}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)},e.prototype.trigger=function(b,c,d){var e={item:{count:this._items.length,index:this.current()}},f=a.camelCase(a.grep(["on",b,d],function(a){return a}).join("-").toLowerCase()),g=a.Event([b,"owl",d||"carousel"].join(".").toLowerCase(),a.extend({relatedTarget:this},e,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(g)}),this.$element.trigger(g),this.settings&&"function"==typeof this.settings[f]&&this.settings[f].apply(this,g)),g},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.browserSupport=function(){if(this.support3d=j(),this.support3d){this.transformVendor=i();var a=["transitionend","webkitTransitionEnd","transitionend","oTransitionEnd"];this.transitionEndVendor=a[h()],this.vendorName=this.transformVendor.replace(/Transform/i,""),this.vendorName=""!==this.vendorName?"-"+this.vendorName.toLowerCase()+"-":""}this.state.orientation=b.orientation},a.fn.owlCarousel=function(b){return this.each(function(){a(this).data("owlCarousel")||a(this).data("owlCarousel",new e(this,b))})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b){var c=function(b){this._core=b,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&"position"==b.property.name||"initialized"==b.type))for(var c=this._core.settings,d=c.center&&Math.ceil(c.items/2)||c.items,e=c.center&&-1*d||0,f=(b.property&&b.property.value||this._core.current())+e,g=this._core.clones().length,h=a.proxy(function(a,b){this.load(b)},this);e++<d;)this.load(g/2+this._core.relative(f)),g&&a.each(this._core.clones(this._core.relative(f++)),h)},this)},this._core.options=a.extend({},c.Defaults,this._core.options),this._core.$element.on(this._handlers)};c.Defaults={lazyLoad:!1},c.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(".owl-lazy");!e||a.inArray(d.get(0),this._loaded)>-1||(e.each(a.proxy(function(c,d){var e,f=a(d),g=b.devicePixelRatio>1&&f.attr("data-src-retina")||f.attr("data-src");this._core.trigger("load",{element:f,url:g},"lazy"),f.is("img")?f.one("load.owl.lazy",a.proxy(function(){f.css("opacity",1),this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("src",g):(e=new Image,e.onload=a.proxy(function(){f.css({"background-image":"url("+g+")",opacity:"1"}),this._core.trigger("loaded",{element:f,url:g},"lazy")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},c.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=c}(window.Zepto||window.jQuery,window,document),function(a){var b=function(c){this._core=c,this._handlers={"initialized.owl.carousel":a.proxy(function(){this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":a.proxy(function(a){this._core.settings.autoHeight&&"position"==a.property.name&&this.update()},this),"loaded.owl.lazy":a.proxy(function(a){this._core.settings.autoHeight&&a.element.closest("."+this._core.settings.itemClass)===this._core.$stage.children().eq(this._core.current())&&this.update()},this)},this._core.options=a.extend({},b.Defaults,this._core.options),this._core.$element.on(this._handlers)};b.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},b.prototype.update=function(){this._core.$stage.parent().height(this._core.$stage.children().eq(this._core.current()).height()).addClass(this._core.settings.autoHeightClass)},b.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=b}(window.Zepto||window.jQuery,window,document),function(a,b,c){var d=function(b){this._core=b,this._videos={},this._playing=null,this._fullscreen=!1,this._handlers={"resize.owl.carousel":a.proxy(function(a){this._core.settings.video&&!this.isInFullScreen()&&a.preventDefault()},this),"refresh.owl.carousel changed.owl.carousel":a.proxy(function(){this._playing&&this.stop()},this),"prepared.owl.carousel":a.proxy(function(b){var c=a(b.content).find(".owl-video");c.length&&(c.css("display","none"),this.fetch(c,a(b.content)))},this)},this._core.options=a.extend({},d.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",a.proxy(function(a){this.play(a)},this))};d.Defaults={video:!1,videoHeight:!1,videoWidth:!1},d.prototype.fetch=function(a,b){var c=a.attr("data-vimeo-id")?"vimeo":"youtube",d=a.attr("data-vimeo-id")||a.attr("data-youtube-id"),e=a.attr("data-width")||this._core.settings.videoWidth,f=a.attr("data-height")||this._core.settings.videoHeight,g=a.attr("href");if(!g)throw new Error("Missing video URL.");if(d=g.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),d[3].indexOf("youtu")>-1)c="youtube";else{if(!(d[3].indexOf("vimeo")>-1))throw new Error("Video URL not supported.");c="vimeo"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr("data-video",g),this.thumbnail(a,this._videos[g])},d.prototype.thumbnail=function(b,c){var d,e,f,g=c.width&&c.height?'style="width:'+c.width+"px;height:"+c.height+'px;"':"",h=b.find("img"),i="src",j="",k=this._core.settings,l=function(a){e='<div class="owl-video-play-icon"></div>',d=k.lazyLoad?'<div class="owl-video-tn '+j+'" '+i+'="'+a+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+a+')"></div>',b.after(d),b.after(e)};return b.wrap('<div class="owl-video-wrapper"'+g+"></div>"),this._core.settings.lazyLoad&&(i="data-src",j="owl-lazy"),h.length?(l(h.attr(i)),h.remove(),!1):void("youtube"===c.type?(f="http://img.youtube.com/vi/"+c.id+"/hqdefault.jpg",l(f)):"vimeo"===c.type&&a.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a[0].thumbnail_large,l(f)}}))},d.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null},d.prototype.play=function(b){this._core.trigger("play",null,"video"),this._playing&&this.stop();var c,d,e=a(b.target||b.srcElement),f=e.closest("."+this._core.settings.itemClass),g=this._videos[f.attr("data-video")],h=g.width||"100%",i=g.height||this._core.$stage.height();"youtube"===g.type?c='<iframe width="'+h+'" height="'+i+'" src="http://www.youtube.com/embed/'+g.id+"?autoplay=1&v="+g.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===g.type&&(c='<iframe src="http://player.vimeo.com/video/'+g.id+'?autoplay=1" width="'+h+'" height="'+i+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),f.addClass("owl-video-playing"),this._playing=f,d=a('<div style="height:'+i+"px; width:"+h+'px" class="owl-video-frame">'+c+"</div>"),e.after(d)},d.prototype.isInFullScreen=function(){var d=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return d&&a(d).parent().hasClass("owl-video-frame")&&(this._core.speed(0),this._fullscreen=!0),d&&this._fullscreen&&this._playing?!1:this._fullscreen?(this._fullscreen=!1,!1):this._playing&&this._core.state.orientation!==b.orientation?(this._core.state.orientation=b.orientation,!1):!0},d.prototype.destroy=function(){var a,b;this._core.$element.off("click.owl.video");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=d}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={"change.owl.carousel":a.proxy(function(a){"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":a.proxy(function(a){this.swapping="translated"==a.type},this),"translate.owl.carousel":a.proxy(function(){this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&this.core.support3d){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.css({left:b+"px"}).addClass("animated owl-animated-out").addClass(g).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",c)),f&&e.addClass("animated owl-animated-in").addClass(f).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",c))}},e.prototype.clear=function(b){a(b.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.transitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c){var d=function(b){this.core=b,this.core.options=a.extend({},d.Defaults,this.core.options),this.handlers={"translated.owl.carousel refreshed.owl.carousel":a.proxy(function(){this.autoplay()
},this),"play.owl.autoplay":a.proxy(function(a,b,c){this.play(b,c)},this),"stop.owl.autoplay":a.proxy(function(){this.stop()},this),"mouseover.owl.autoplay":a.proxy(function(){this.core.settings.autoplayHoverPause&&this.pause()},this),"mouseleave.owl.autoplay":a.proxy(function(){this.core.settings.autoplayHoverPause&&this.autoplay()},this)},this.core.$element.on(this.handlers)};d.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},d.prototype.autoplay=function(){this.core.settings.autoplay&&!this.core.state.videoPlay?(b.clearInterval(this.interval),this.interval=b.setInterval(a.proxy(function(){this.play()},this),this.core.settings.autoplayTimeout)):b.clearInterval(this.interval)},d.prototype.play=function(){return c.hidden===!0||this.core.state.isTouch||this.core.state.isScrolling||this.core.state.isSwiping||this.core.state.inMotion?void 0:this.core.settings.autoplay===!1?void b.clearInterval(this.interval):void this.core.next(this.core.settings.autoplaySpeed)},d.prototype.stop=function(){b.clearInterval(this.interval)},d.prototype.pause=function(){b.clearInterval(this.interval)},d.prototype.destroy=function(){var a,c;b.clearInterval(this.interval);for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=d}(window.Zepto||window.jQuery,window,document),function(a){"use strict";var b=function(c){this._core=c,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":a.proxy(function(b){this._core.settings.dotsData&&this._templates.push(a(b.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"add.owl.carousel":a.proxy(function(b){this._core.settings.dotsData&&this._templates.splice(b.position,0,a(b.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"remove.owl.carousel prepared.owl.carousel":a.proxy(function(a){this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),"change.owl.carousel":a.proxy(function(a){if("position"==a.property.name&&!this._core.state.revert&&!this._core.settings.loop&&this._core.settings.navRewind){var b=this._core.current(),c=this._core.maximum(),d=this._core.minimum();a.data=a.property.value>c?b>=c?d:c:a.property.value<d?c:a.property.value}},this),"changed.owl.carousel":a.proxy(function(a){"position"==a.property.name&&this.draw()},this),"refreshed.owl.carousel":a.proxy(function(){this._initialized||(this.initialize(),this._initialized=!0),this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation")},this)},this._core.options=a.extend({},b.Defaults,this._core.options),this.$element.on(this._handlers)};b.Defaults={nav:!1,navRewind:!0,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotData:!1,dotsSpeed:!1,dotsContainer:!1,controlsClass:"owl-controls"},b.prototype.initialize=function(){var b,c,d=this._core.settings;d.dotsData||(this._templates=[a("<div>").addClass(d.dotClass).append(a("<span>")).prop("outerHTML")]),d.navContainer&&d.dotsContainer||(this._controls.$container=a("<div>").addClass(d.controlsClass).appendTo(this.$element)),this._controls.$indicators=d.dotsContainer?a(d.dotsContainer):a("<div>").hide().addClass(d.dotsClass).appendTo(this._controls.$container),this._controls.$indicators.on("click","div",a.proxy(function(b){var c=a(b.target).parent().is(this._controls.$indicators)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(c,d.dotsSpeed)},this)),b=d.navContainer?a(d.navContainer):a("<div>").addClass(d.navContainerClass).prependTo(this._controls.$container),this._controls.$next=a("<"+d.navElement+">"),this._controls.$previous=this._controls.$next.clone(),this._controls.$previous.addClass(d.navClass[0]).html(d.navText[0]).hide().prependTo(b).on("click",a.proxy(function(){this.prev(d.navSpeed)},this)),this._controls.$next.addClass(d.navClass[1]).html(d.navText[1]).hide().appendTo(b).on("click",a.proxy(function(){this.next(d.navSpeed)},this));for(c in this._overrides)this._core[c]=a.proxy(this[c],this)},b.prototype.destroy=function(){var a,b,c,d;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},b.prototype.update=function(){var a,b,c,d=this._core.settings,e=this._core.clones().length/2,f=e+this._core.items().length,g=d.center||d.autoWidth||d.dotData?1:d.dotsEach||d.items;if("page"!==d.slideBy&&(d.slideBy=Math.min(d.slideBy,d.items)),d.dots||"page"==d.slideBy)for(this._pages=[],a=e,b=0,c=0;f>a;a++)(b>=g||0===b)&&(this._pages.push({start:a-e,end:a-e+g-1}),b=0,++c),b+=this._core.mergers(this._core.relative(a))},b.prototype.draw=function(){var b,c,d="",e=this._core.settings,f=(this._core.$stage.children(),this._core.relative(this._core.current()));if(!e.nav||e.loop||e.navRewind||(this._controls.$previous.toggleClass("disabled",0>=f),this._controls.$next.toggleClass("disabled",f>=this._core.maximum())),this._controls.$previous.toggle(e.nav),this._controls.$next.toggle(e.nav),e.dots){if(b=this._pages.length-this._controls.$indicators.children().length,e.dotData&&0!==b){for(c=0;c<this._controls.$indicators.children().length;c++)d+=this._templates[this._core.relative(c)];this._controls.$indicators.html(d)}else b>0?(d=new Array(b+1).join(this._templates[0]),this._controls.$indicators.append(d)):0>b&&this._controls.$indicators.children().slice(b).remove();this._controls.$indicators.find(".active").removeClass("active"),this._controls.$indicators.children().eq(a.inArray(this.current(),this._pages)).addClass("active")}this._controls.$indicators.toggle(e.dots)},b.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotData?1:c.dotsEach||c.items)}},b.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,function(a){return a.start<=b&&a.end>=b}).pop()},b.prototype.getPosition=function(b){var c,d,e=this._core.settings;return"page"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},b.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},b.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},b.prototype.to=function(b,c,d){var e;d?a.proxy(this._overrides.to,this._core)(b,c):(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c))},a.fn.owlCarousel.Constructor.Plugins.Navigation=b}(window.Zepto||window.jQuery,window,document),function(a,b){"use strict";var c=function(d){this._core=d,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":a.proxy(function(){"URLHash"==this._core.settings.startPosition&&a(b).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":a.proxy(function(b){var c=a(b.content).find("[data-hash]").andSelf("[data-hash]").attr("data-hash");this._hashes[c]=b.content},this)},this._core.options=a.extend({},c.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on("hashchange.owl.navigation",a.proxy(function(){var a=b.location.hash.substring(1),c=this._core.$stage.children(),d=this._hashes[a]&&c.index(this._hashes[a])||0;return a?void this._core.to(d,!1,!0):!1},this))};c.Defaults={URLhashListener:!1},c.prototype.destroy=function(){var c,d;a(b).off("hashchange.owl.navigation");for(c in this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=c}(window.Zepto||window.jQuery,window,document);



$(document).ready(function() {

	$('.button-up').on('click',function(event) {
		$('body, html').animate({scrollTop: 0}, 500)
	});


	var orgElementPos = $('.menu').position();
	orgElementTop = orgElementPos.top;

	$(document).on('scroll', stickIt);
	
	function stickIt() {
		if ($(window).scrollTop() >= 200) {
			$('.menu')
				.addClass('stuck');
			$('.button-up').fadeIn(300);
		} else {

			$('.menu')
				.removeClass('stuck');
			$('.button-up').fadeOut(300);
		}
	}

	$('.mobile-menu').on('click', function() {
		$(this).toggleClass('open');
		$('.menu').toggleClass('open');
		$('.contacts__sidebar_mobile').removeClass('open');
	})

	$('.mobile-contacts').on('click', function() {
		$(this).toggleClass('open');
		$('.contacts__sidebar_mobile').toggleClass('open');
		$('.menu').removeClass('open');
		$('.mobile-menu').removeClass('open');
	})
	
$('.clients__list').owlCarousel({
	
	autoplay:true,
	autoplayHoverPause:true,
	loop:true,
	items: 8,
	responsiveClass:true,
	dots: false,
	navText: '',
	responsive:{
		0:{
			items:2,
			nav:true
		},
		600:{
			items:4,
			nav:false
		},
		1000:{
			items:5,
			nav:true
		}
	}
});
$('.thanks__carowsel').owlCarousel({
	
	autoplay:3000,
	autoplayHoverPause:true,
	loop:true,
	items: 1,
	responsiveClass:true,
	dots: false
});

$('.menu').on('click', function(e) {
	
	if ($(e.target).hasClass('page-nav')) {
		console.log(e.target)
		e.preventDefault();
		showSection($(e.target).attr('href'), true);
		$('.menu').toggleClass('open');
		$('.mobile-menu').removeClass('open');
	}
});
showSection(window.location.hash, false);


$(window).scroll(function() {
	checkSection();
});

function showSection(section, isAnimate) {
 var
	 direction = section.replace(/#/, ''),
	 reqSection = $('.section').filter('[data-section="' + direction + '"]');
	console.log('section',reqSection);
 if (reqSection.length) {
	var reqSectionPos = reqSection.offset().top - 70;    
		 console.log(reqSection.offset().top);
	 if (isAnimate) {
		 $('body, html').animate({scrollTop: reqSectionPos}, 500);
	 } else {
		 $('body, html').scrollTop(reqSectionPos);
	 };
}
 
			

};
function checkSection() {
	$('.section').each(function() {
		var
			$this = $(this),
			topEdge = $this.offset().top - 400,
			bottomEdge = topEdge + $this.height(),
			wScroll = $(window).scrollTop();
		if (topEdge < wScroll && bottomEdge  > wScroll) {
			var
				currentId = $this.data('section'),
				reqLink = $('.menu__link').filter('[href="#' + currentId + '"]');
			reqLink
				.closest('.menu__item')
				.addClass('active')
				.siblings()
				.removeClass('active');	
			// $('.section').filter('.section_' + currentId).css('opacity', '1').css('left', '0');
		}
	});
};



var $overlay = $('<div id="overlay"></div>');
var $image = $("<img>");

//An image to overlay
$overlay.append($image);

//Add overlay
$(".content__wrapper_thanks").append($overlay);

  //click the image and a scaled version of the full size image will appear
  $("#photo-gallery a").click( function(event) {
	console.log('show img');
	event.preventDefault();
	var imageLocation = $(this).attr("href");

	//update overlay with the image linked in the link
	$image.attr("src", imageLocation);

	//show the overlay
	$overlay.fadeIn(200);
  } );

  $("#overlay").click(function() {
	$( "#overlay" ).fadeOut(100);
  });
		
});

$(document).ready(function() {
	var map;

		DG.then(function () {
				map = DG.map('map', {
						center: [54.997444, 73.382648],
						zoom: 18,
						// pkg: 'basic',
						watch: true,
						skin: 'light',
						fullscreenControl: false,
						scrollWheelZoom: false
				});

				DG.marker([54.997540, 73.381165]).addTo(map).bindPopup('Яркий мир');
		});
	var $slider = $(".slider"),
			$slideBGs = $(".slide__bg"),
			diff = 0,
			curSlide = 0,
			numOfSlides = $(".slide").length-1,
			animating = false,
			animTime = 500,
			autoSlideTimeout,
			autoSlideDelay = 6000,
			$pagination = $(".slider-pagi");
	
	function createBullets() {
		for (var i = 0; i < numOfSlides+1; i++) {
			var $li = $("<li class='slider-pagi__elem'></li>");
			$li.addClass("slider-pagi__elem-"+i).data("page", i);
			if (!i) $li.addClass("active");
			$pagination.append($li);
		}
	};
	
	createBullets();
	
	function manageControls() {
		$(".slider-control").removeClass("inactive");
		if (!curSlide) $(".slider-control.left").addClass("inactive");
		if (curSlide === numOfSlides) $(".slider-control.right").addClass("inactive");
	};
	
	function autoSlide() {
		autoSlideTimeout = setTimeout(function() {
			curSlide++;
			if (curSlide > numOfSlides) curSlide = 0;
			changeSlides();
		}, autoSlideDelay);
	};
	
	autoSlide();
	
	function changeSlides(instant) {
		if (!instant) {
			animating = true;
			manageControls();
			$slider.addClass("animating");
			$slider.css("top");
			$(".slide").removeClass("active");
			$(".slide-"+curSlide).addClass("active");
			setTimeout(function() {
				$slider.removeClass("animating");
				animating = false;
			}, animTime);
		}
		window.clearTimeout(autoSlideTimeout);
		$(".slider-pagi__elem").removeClass("active");
		$(".slider-pagi__elem-"+curSlide).addClass("active");
		$slider.css("transform", "translate3d("+ -curSlide*100 +"%,0,0)");
		$slideBGs.css("transform", "translate3d("+ curSlide*50 +"%,0,0)");
		diff = 0;
		autoSlide();
	}

	function navigateLeft() {
		if (animating) return;
		if (curSlide > 0) curSlide--;
		changeSlides();
	}

	function navigateRight() {
		if (animating) return;
		if (curSlide < numOfSlides) curSlide++;
		changeSlides();
	}

	$(document).on("mousedown touchstart", ".slider", function(e) {
		if (animating) return;
		window.clearTimeout(autoSlideTimeout);
		var startX = e.pageX || e.originalEvent.touches[0].pageX,
				winW = $(window).width();
		diff = 0;
		
		$(document).on("mousemove touchmove", function(e) {
			var x = e.pageX || e.originalEvent.touches[0].pageX;
			diff = (startX - x) / winW * 70;
			if ((!curSlide && diff < 0) || (curSlide === numOfSlides && diff > 0)) diff /= 2;
			$slider.css("transform", "translate3d("+ (-curSlide*100 - diff) +"%,0,0)");
			$slideBGs.css("transform", "translate3d("+ (curSlide*50 + diff/2) +"%,0,0)");
		});
	});
	
	$(document).on("mouseup touchend", function(e) {
		$(document).off("mousemove touchmove");
		if (animating) return;
		if (!diff) {
			changeSlides(true);
			return;
		}
		if (diff > -8 && diff < 8) {
			changeSlides();
			return;
		}
		if (diff <= -8) {
			navigateLeft();
		}
		if (diff >= 8) {
			navigateRight();
		}
	});
	
	$(document).on("click", ".slider-control", function() {
		if ($(this).hasClass("left")) {
			navigateLeft();
		} else {
			navigateRight();
		}
	});
	
	$(document).on("click", ".slider-pagi__elem", function() {
		curSlide = $(this).data("page");
		changeSlides();
	});
	
});

$(document).ready(function(){
	$("#form").submit(function() { //устанавливаем событие отправки для формы с id=form
		var form_data = $(this).serialize(); //собераем все данные из формы
		$.ajax({
			type: "POST", //Метод отправки
			url: "send.php", //путь до php фаила отправителя
			data: form_data,
			success: function() {
						alert("Ваше сообщение отпрвлено!");
					}
		});
	});
});


//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGIsYyl7dGhpcy5zZXR0aW5ncz1udWxsLHRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSxlLkRlZmF1bHRzLGMpLHRoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLmRyYWc9YS5leHRlbmQoe30sbSksdGhpcy5zdGF0ZT1hLmV4dGVuZCh7fSxuKSx0aGlzLmU9YS5leHRlbmQoe30sbyksdGhpcy5fcGx1Z2lucz17fSx0aGlzLl9zdXByZXNzPXt9LHRoaXMuX2N1cnJlbnQ9bnVsbCx0aGlzLl9zcGVlZD1udWxsLHRoaXMuX2Nvb3JkaW5hdGVzPVtdLHRoaXMuX2JyZWFrcG9pbnQ9bnVsbCx0aGlzLl93aWR0aD1udWxsLHRoaXMuX2l0ZW1zPVtdLHRoaXMuX2Nsb25lcz1bXSx0aGlzLl9tZXJnZXJzPVtdLHRoaXMuX2ludmFsaWRhdGVkPXt9LHRoaXMuX3BpcGU9W10sYS5lYWNoKGUuUGx1Z2lucyxhLnByb3h5KGZ1bmN0aW9uKGEsYil7dGhpcy5fcGx1Z2luc1thWzBdLnRvTG93ZXJDYXNlKCkrYS5zbGljZSgxKV09bmV3IGIodGhpcyl9LHRoaXMpKSxhLmVhY2goZS5QaXBlLGEucHJveHkoZnVuY3Rpb24oYixjKXt0aGlzLl9waXBlLnB1c2goe2ZpbHRlcjpjLmZpbHRlcixydW46YS5wcm94eShjLnJ1bix0aGlzKX0pfSx0aGlzKSksdGhpcy5zZXR1cCgpLHRoaXMuaW5pdGlhbGl6ZSgpfWZ1bmN0aW9uIGYoYSl7aWYoYS50b3VjaGVzIT09ZClyZXR1cm57eDphLnRvdWNoZXNbMF0ucGFnZVgseTphLnRvdWNoZXNbMF0ucGFnZVl9O2lmKGEudG91Y2hlcz09PWQpe2lmKGEucGFnZVghPT1kKXJldHVybnt4OmEucGFnZVgseTphLnBhZ2VZfTtpZihhLnBhZ2VYPT09ZClyZXR1cm57eDphLmNsaWVudFgseTphLmNsaWVudFl9fX1mdW5jdGlvbiBnKGEpe3ZhciBiLGQsZT1jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZj1hO2ZvcihiIGluIGYpaWYoZD1mW2JdLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBlLnN0eWxlW2RdKXJldHVybiBlPW51bGwsW2QsYl07cmV0dXJuWyExXX1mdW5jdGlvbiBoKCl7cmV0dXJuIGcoW1widHJhbnNpdGlvblwiLFwiV2Via2l0VHJhbnNpdGlvblwiLFwiTW96VHJhbnNpdGlvblwiLFwiT1RyYW5zaXRpb25cIl0pWzFdfWZ1bmN0aW9uIGkoKXtyZXR1cm4gZyhbXCJ0cmFuc2Zvcm1cIixcIldlYmtpdFRyYW5zZm9ybVwiLFwiTW96VHJhbnNmb3JtXCIsXCJPVHJhbnNmb3JtXCIsXCJtc1RyYW5zZm9ybVwiXSlbMF19ZnVuY3Rpb24gaigpe3JldHVybiBnKFtcInBlcnNwZWN0aXZlXCIsXCJ3ZWJraXRQZXJzcGVjdGl2ZVwiLFwiTW96UGVyc3BlY3RpdmVcIixcIk9QZXJzcGVjdGl2ZVwiLFwiTXNQZXJzcGVjdGl2ZVwiXSlbMF19ZnVuY3Rpb24gaygpe3JldHVyblwib250b3VjaHN0YXJ0XCJpbiBifHwhIW5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzfWZ1bmN0aW9uIGwoKXtyZXR1cm4gYi5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZH12YXIgbSxuLG87bT17c3RhcnQ6MCxzdGFydFg6MCxzdGFydFk6MCxjdXJyZW50OjAsY3VycmVudFg6MCxjdXJyZW50WTowLG9mZnNldFg6MCxvZmZzZXRZOjAsZGlzdGFuY2U6bnVsbCxzdGFydFRpbWU6MCxlbmRUaW1lOjAsdXBkYXRlZFg6MCx0YXJnZXRFbDpudWxsfSxuPXtpc1RvdWNoOiExLGlzU2Nyb2xsaW5nOiExLGlzU3dpcGluZzohMSxkaXJlY3Rpb246ITEsaW5Nb3Rpb246ITF9LG89e19vbkRyYWdTdGFydDpudWxsLF9vbkRyYWdNb3ZlOm51bGwsX29uRHJhZ0VuZDpudWxsLF90cmFuc2l0aW9uRW5kOm51bGwsX3Jlc2l6ZXI6bnVsbCxfcmVzcG9uc2l2ZUNhbGw6bnVsbCxfZ29Ub0xvb3A6bnVsbCxfY2hlY2tWaXNpYmlsZTpudWxsfSxlLkRlZmF1bHRzPXtpdGVtczozLGxvb3A6ITEsY2VudGVyOiExLG1vdXNlRHJhZzohMCx0b3VjaERyYWc6ITAscHVsbERyYWc6ITAsZnJlZURyYWc6ITEsbWFyZ2luOjAsc3RhZ2VQYWRkaW5nOjAsbWVyZ2U6ITEsbWVyZ2VGaXQ6ITAsYXV0b1dpZHRoOiExLHN0YXJ0UG9zaXRpb246MCxydGw6ITEsc21hcnRTcGVlZDoyNTAsZmx1aWRTcGVlZDohMSxkcmFnRW5kU3BlZWQ6ITEscmVzcG9uc2l2ZTp7fSxyZXNwb25zaXZlUmVmcmVzaFJhdGU6MjAwLHJlc3BvbnNpdmVCYXNlRWxlbWVudDpiLHJlc3BvbnNpdmVDbGFzczohMSxmYWxsYmFja0Vhc2luZzpcInN3aW5nXCIsaW5mbzohMSxuZXN0ZWRJdGVtU2VsZWN0b3I6ITEsaXRlbUVsZW1lbnQ6XCJkaXZcIixzdGFnZUVsZW1lbnQ6XCJkaXZcIix0aGVtZUNsYXNzOlwib3dsLXRoZW1lXCIsYmFzZUNsYXNzOlwib3dsLWNhcm91c2VsXCIsaXRlbUNsYXNzOlwib3dsLWl0ZW1cIixjZW50ZXJDbGFzczpcImNlbnRlclwiLGFjdGl2ZUNsYXNzOlwiYWN0aXZlXCJ9LGUuV2lkdGg9e0RlZmF1bHQ6XCJkZWZhdWx0XCIsSW5uZXI6XCJpbm5lclwiLE91dGVyOlwib3V0ZXJcIn0sZS5QbHVnaW5zPXt9LGUuUGlwZT1be2ZpbHRlcjpbXCJ3aWR0aFwiLFwiaXRlbXNcIixcInNldHRpbmdzXCJdLHJ1bjpmdW5jdGlvbihhKXthLmN1cnJlbnQ9dGhpcy5faXRlbXMmJnRoaXMuX2l0ZW1zW3RoaXMucmVsYXRpdmUodGhpcy5fY3VycmVudCldfX0se2ZpbHRlcjpbXCJpdGVtc1wiLFwic2V0dGluZ3NcIl0scnVuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fY2xvbmVzLGI9dGhpcy4kc3RhZ2UuY2hpbGRyZW4oXCIuY2xvbmVkXCIpOyhiLmxlbmd0aCE9PWEubGVuZ3RofHwhdGhpcy5zZXR0aW5ncy5sb29wJiZhLmxlbmd0aD4wKSYmKHRoaXMuJHN0YWdlLmNoaWxkcmVuKFwiLmNsb25lZFwiKS5yZW1vdmUoKSx0aGlzLl9jbG9uZXM9W10pfX0se2ZpbHRlcjpbXCJpdGVtc1wiLFwic2V0dGluZ3NcIl0scnVuOmZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMuX2Nsb25lcyxkPXRoaXMuX2l0ZW1zLGU9dGhpcy5zZXR0aW5ncy5sb29wP2MubGVuZ3RoLU1hdGgubWF4KDIqdGhpcy5zZXR0aW5ncy5pdGVtcyw0KTowO2ZvcihhPTAsYj1NYXRoLmFicyhlLzIpO2I+YTthKyspZT4wPyh0aGlzLiRzdGFnZS5jaGlsZHJlbigpLmVxKGQubGVuZ3RoK2MubGVuZ3RoLTEpLnJlbW92ZSgpLGMucG9wKCksdGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5lcSgwKS5yZW1vdmUoKSxjLnBvcCgpKTooYy5wdXNoKGMubGVuZ3RoLzIpLHRoaXMuJHN0YWdlLmFwcGVuZChkW2NbYy5sZW5ndGgtMV1dLmNsb25lKCkuYWRkQ2xhc3MoXCJjbG9uZWRcIikpLGMucHVzaChkLmxlbmd0aC0xLShjLmxlbmd0aC0xKS8yKSx0aGlzLiRzdGFnZS5wcmVwZW5kKGRbY1tjLmxlbmd0aC0xXV0uY2xvbmUoKS5hZGRDbGFzcyhcImNsb25lZFwiKSkpfX0se2ZpbHRlcjpbXCJ3aWR0aFwiLFwiaXRlbXNcIixcInNldHRpbmdzXCJdLHJ1bjpmdW5jdGlvbigpe3ZhciBhLGIsYyxkPXRoaXMuc2V0dGluZ3MucnRsPzE6LTEsZT0odGhpcy53aWR0aCgpL3RoaXMuc2V0dGluZ3MuaXRlbXMpLnRvRml4ZWQoMyksZj0wO2Zvcih0aGlzLl9jb29yZGluYXRlcz1bXSxiPTAsYz10aGlzLl9jbG9uZXMubGVuZ3RoK3RoaXMuX2l0ZW1zLmxlbmd0aDtjPmI7YisrKWE9dGhpcy5fbWVyZ2Vyc1t0aGlzLnJlbGF0aXZlKGIpXSxhPXRoaXMuc2V0dGluZ3MubWVyZ2VGaXQmJk1hdGgubWluKGEsdGhpcy5zZXR0aW5ncy5pdGVtcyl8fGEsZis9KHRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoP3RoaXMuX2l0ZW1zW3RoaXMucmVsYXRpdmUoYildLndpZHRoKCkrdGhpcy5zZXR0aW5ncy5tYXJnaW46ZSphKSpkLHRoaXMuX2Nvb3JkaW5hdGVzLnB1c2goZil9fSx7ZmlsdGVyOltcIndpZHRoXCIsXCJpdGVtc1wiLFwic2V0dGluZ3NcIl0scnVuOmZ1bmN0aW9uKCl7dmFyIGIsYyxkPSh0aGlzLndpZHRoKCkvdGhpcy5zZXR0aW5ncy5pdGVtcykudG9GaXhlZCgzKSxlPXt3aWR0aDpNYXRoLmFicyh0aGlzLl9jb29yZGluYXRlc1t0aGlzLl9jb29yZGluYXRlcy5sZW5ndGgtMV0pKzIqdGhpcy5zZXR0aW5ncy5zdGFnZVBhZGRpbmcsXCJwYWRkaW5nLWxlZnRcIjp0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZ3x8XCJcIixcInBhZGRpbmctcmlnaHRcIjp0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZ3x8XCJcIn07aWYodGhpcy4kc3RhZ2UuY3NzKGUpLGU9e3dpZHRoOnRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoP1wiYXV0b1wiOmQtdGhpcy5zZXR0aW5ncy5tYXJnaW59LGVbdGhpcy5zZXR0aW5ncy5ydGw/XCJtYXJnaW4tbGVmdFwiOlwibWFyZ2luLXJpZ2h0XCJdPXRoaXMuc2V0dGluZ3MubWFyZ2luLCF0aGlzLnNldHRpbmdzLmF1dG9XaWR0aCYmYS5ncmVwKHRoaXMuX21lcmdlcnMsZnVuY3Rpb24oYSl7cmV0dXJuIGE+MX0pLmxlbmd0aD4wKWZvcihiPTAsYz10aGlzLl9jb29yZGluYXRlcy5sZW5ndGg7Yz5iO2IrKyllLndpZHRoPU1hdGguYWJzKHRoaXMuX2Nvb3JkaW5hdGVzW2JdKS1NYXRoLmFicyh0aGlzLl9jb29yZGluYXRlc1tiLTFdfHwwKS10aGlzLnNldHRpbmdzLm1hcmdpbix0aGlzLiRzdGFnZS5jaGlsZHJlbigpLmVxKGIpLmNzcyhlKTtlbHNlIHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkuY3NzKGUpfX0se2ZpbHRlcjpbXCJ3aWR0aFwiLFwiaXRlbXNcIixcInNldHRpbmdzXCJdLHJ1bjpmdW5jdGlvbihhKXthLmN1cnJlbnQmJnRoaXMucmVzZXQodGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5pbmRleChhLmN1cnJlbnQpKX19LHtmaWx0ZXI6W1wicG9zaXRpb25cIl0scnVuOmZ1bmN0aW9uKCl7dGhpcy5hbmltYXRlKHRoaXMuY29vcmRpbmF0ZXModGhpcy5fY3VycmVudCkpfX0se2ZpbHRlcjpbXCJ3aWR0aFwiLFwicG9zaXRpb25cIixcIml0ZW1zXCIsXCJzZXR0aW5nc1wiXSxydW46ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlPXRoaXMuc2V0dGluZ3MucnRsPzE6LTEsZj0yKnRoaXMuc2V0dGluZ3Muc3RhZ2VQYWRkaW5nLGc9dGhpcy5jb29yZGluYXRlcyh0aGlzLmN1cnJlbnQoKSkrZixoPWcrdGhpcy53aWR0aCgpKmUsaT1bXTtmb3IoYz0wLGQ9dGhpcy5fY29vcmRpbmF0ZXMubGVuZ3RoO2Q+YztjKyspYT10aGlzLl9jb29yZGluYXRlc1tjLTFdfHwwLGI9TWF0aC5hYnModGhpcy5fY29vcmRpbmF0ZXNbY10pK2YqZSwodGhpcy5vcChhLFwiPD1cIixnKSYmdGhpcy5vcChhLFwiPlwiLGgpfHx0aGlzLm9wKGIsXCI8XCIsZykmJnRoaXMub3AoYixcIj5cIixoKSkmJmkucHVzaChjKTt0aGlzLiRzdGFnZS5jaGlsZHJlbihcIi5cIit0aGlzLnNldHRpbmdzLmFjdGl2ZUNsYXNzKS5yZW1vdmVDbGFzcyh0aGlzLnNldHRpbmdzLmFjdGl2ZUNsYXNzKSx0aGlzLiRzdGFnZS5jaGlsZHJlbihcIjplcShcIitpLmpvaW4oXCIpLCA6ZXEoXCIpK1wiKVwiKS5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLmFjdGl2ZUNsYXNzKSx0aGlzLnNldHRpbmdzLmNlbnRlciYmKHRoaXMuJHN0YWdlLmNoaWxkcmVuKFwiLlwiK3RoaXMuc2V0dGluZ3MuY2VudGVyQ2xhc3MpLnJlbW92ZUNsYXNzKHRoaXMuc2V0dGluZ3MuY2VudGVyQ2xhc3MpLHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkuZXEodGhpcy5jdXJyZW50KCkpLmFkZENsYXNzKHRoaXMuc2V0dGluZ3MuY2VudGVyQ2xhc3MpKX19XSxlLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7aWYodGhpcy50cmlnZ2VyKFwiaW5pdGlhbGl6ZVwiKSx0aGlzLiRlbGVtZW50LmFkZENsYXNzKHRoaXMuc2V0dGluZ3MuYmFzZUNsYXNzKS5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLnRoZW1lQ2xhc3MpLnRvZ2dsZUNsYXNzKFwib3dsLXJ0bFwiLHRoaXMuc2V0dGluZ3MucnRsKSx0aGlzLmJyb3dzZXJTdXBwb3J0KCksdGhpcy5zZXR0aW5ncy5hdXRvV2lkdGgmJnRoaXMuc3RhdGUuaW1hZ2VzTG9hZGVkIT09ITApe3ZhciBiLGMsZTtpZihiPXRoaXMuJGVsZW1lbnQuZmluZChcImltZ1wiKSxjPXRoaXMuc2V0dGluZ3MubmVzdGVkSXRlbVNlbGVjdG9yP1wiLlwiK3RoaXMuc2V0dGluZ3MubmVzdGVkSXRlbVNlbGVjdG9yOmQsZT10aGlzLiRlbGVtZW50LmNoaWxkcmVuKGMpLndpZHRoKCksYi5sZW5ndGgmJjA+PWUpcmV0dXJuIHRoaXMucHJlbG9hZEF1dG9XaWR0aEltYWdlcyhiKSwhMX10aGlzLiRlbGVtZW50LmFkZENsYXNzKFwib3dsLWxvYWRpbmdcIiksdGhpcy4kc3RhZ2U9YShcIjxcIit0aGlzLnNldHRpbmdzLnN0YWdlRWxlbWVudCsnIGNsYXNzPVwib3dsLXN0YWdlXCIvPicpLndyYXAoJzxkaXYgY2xhc3M9XCJvd2wtc3RhZ2Utb3V0ZXJcIj4nKSx0aGlzLiRlbGVtZW50LmFwcGVuZCh0aGlzLiRzdGFnZS5wYXJlbnQoKSksdGhpcy5yZXBsYWNlKHRoaXMuJGVsZW1lbnQuY2hpbGRyZW4oKS5ub3QodGhpcy4kc3RhZ2UucGFyZW50KCkpKSx0aGlzLl93aWR0aD10aGlzLiRlbGVtZW50LndpZHRoKCksdGhpcy5yZWZyZXNoKCksdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcIm93bC1sb2FkaW5nXCIpLmFkZENsYXNzKFwib3dsLWxvYWRlZFwiKSx0aGlzLmV2ZW50c0NhbGwoKSx0aGlzLmludGVybmFsRXZlbnRzKCksdGhpcy5hZGRUcmlnZ2VyYWJsZUV2ZW50cygpLHRoaXMudHJpZ2dlcihcImluaXRpYWxpemVkXCIpfSxlLnByb3RvdHlwZS5zZXR1cD1mdW5jdGlvbigpe3ZhciBiPXRoaXMudmlld3BvcnQoKSxjPXRoaXMub3B0aW9ucy5yZXNwb25zaXZlLGQ9LTEsZT1udWxsO2M/KGEuZWFjaChjLGZ1bmN0aW9uKGEpe2I+PWEmJmE+ZCYmKGQ9TnVtYmVyKGEpKX0pLGU9YS5leHRlbmQoe30sdGhpcy5vcHRpb25zLGNbZF0pLGRlbGV0ZSBlLnJlc3BvbnNpdmUsZS5yZXNwb25zaXZlQ2xhc3MmJnRoaXMuJGVsZW1lbnQuYXR0cihcImNsYXNzXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5yZXBsYWNlKC9cXGIgb3dsLXJlc3BvbnNpdmUtXFxTKy9nLFwiXCIpfSkuYWRkQ2xhc3MoXCJvd2wtcmVzcG9uc2l2ZS1cIitkKSk6ZT1hLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMpLChudWxsPT09dGhpcy5zZXR0aW5nc3x8dGhpcy5fYnJlYWtwb2ludCE9PWQpJiYodGhpcy50cmlnZ2VyKFwiY2hhbmdlXCIse3Byb3BlcnR5OntuYW1lOlwic2V0dGluZ3NcIix2YWx1ZTplfX0pLHRoaXMuX2JyZWFrcG9pbnQ9ZCx0aGlzLnNldHRpbmdzPWUsdGhpcy5pbnZhbGlkYXRlKFwic2V0dGluZ3NcIiksdGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHtwcm9wZXJ0eTp7bmFtZTpcInNldHRpbmdzXCIsdmFsdWU6dGhpcy5zZXR0aW5nc319KSl9LGUucHJvdG90eXBlLm9wdGlvbnNMb2dpYz1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQudG9nZ2xlQ2xhc3MoXCJvd2wtY2VudGVyXCIsdGhpcy5zZXR0aW5ncy5jZW50ZXIpLHRoaXMuc2V0dGluZ3MubG9vcCYmdGhpcy5faXRlbXMubGVuZ3RoPHRoaXMuc2V0dGluZ3MuaXRlbXMmJih0aGlzLnNldHRpbmdzLmxvb3A9ITEpLHRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoJiYodGhpcy5zZXR0aW5ncy5zdGFnZVBhZGRpbmc9ITEsdGhpcy5zZXR0aW5ncy5tZXJnZT0hMSl9LGUucHJvdG90eXBlLnByZXBhcmU9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy50cmlnZ2VyKFwicHJlcGFyZVwiLHtjb250ZW50OmJ9KTtyZXR1cm4gYy5kYXRhfHwoYy5kYXRhPWEoXCI8XCIrdGhpcy5zZXR0aW5ncy5pdGVtRWxlbWVudCtcIi8+XCIpLmFkZENsYXNzKHRoaXMuc2V0dGluZ3MuaXRlbUNsYXNzKS5hcHBlbmQoYikpLHRoaXMudHJpZ2dlcihcInByZXBhcmVkXCIse2NvbnRlbnQ6Yy5kYXRhfSksYy5kYXRhfSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtmb3IodmFyIGI9MCxjPXRoaXMuX3BpcGUubGVuZ3RoLGQ9YS5wcm94eShmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thXX0sdGhpcy5faW52YWxpZGF0ZWQpLGU9e307Yz5iOykodGhpcy5faW52YWxpZGF0ZWQuYWxsfHxhLmdyZXAodGhpcy5fcGlwZVtiXS5maWx0ZXIsZCkubGVuZ3RoPjApJiZ0aGlzLl9waXBlW2JdLnJ1bihlKSxiKys7dGhpcy5faW52YWxpZGF0ZWQ9e319LGUucHJvdG90eXBlLndpZHRoPWZ1bmN0aW9uKGEpe3N3aXRjaChhPWF8fGUuV2lkdGguRGVmYXVsdCl7Y2FzZSBlLldpZHRoLklubmVyOmNhc2UgZS5XaWR0aC5PdXRlcjpyZXR1cm4gdGhpcy5fd2lkdGg7ZGVmYXVsdDpyZXR1cm4gdGhpcy5fd2lkdGgtMip0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZyt0aGlzLnNldHRpbmdzLm1hcmdpbn19LGUucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5faXRlbXMubGVuZ3RoKXJldHVybiExOyhuZXcgRGF0ZSkuZ2V0VGltZSgpO3RoaXMudHJpZ2dlcihcInJlZnJlc2hcIiksdGhpcy5zZXR1cCgpLHRoaXMub3B0aW9uc0xvZ2ljKCksdGhpcy4kc3RhZ2UuYWRkQ2xhc3MoXCJvd2wtcmVmcmVzaFwiKSx0aGlzLnVwZGF0ZSgpLHRoaXMuJHN0YWdlLnJlbW92ZUNsYXNzKFwib3dsLXJlZnJlc2hcIiksdGhpcy5zdGF0ZS5vcmllbnRhdGlvbj1iLm9yaWVudGF0aW9uLHRoaXMud2F0Y2hWaXNpYmlsaXR5KCksdGhpcy50cmlnZ2VyKFwicmVmcmVzaGVkXCIpfSxlLnByb3RvdHlwZS5ldmVudHNDYWxsPWZ1bmN0aW9uKCl7dGhpcy5lLl9vbkRyYWdTdGFydD1hLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMub25EcmFnU3RhcnQoYSl9LHRoaXMpLHRoaXMuZS5fb25EcmFnTW92ZT1hLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMub25EcmFnTW92ZShhKX0sdGhpcyksdGhpcy5lLl9vbkRyYWdFbmQ9YS5wcm94eShmdW5jdGlvbihhKXt0aGlzLm9uRHJhZ0VuZChhKX0sdGhpcyksdGhpcy5lLl9vblJlc2l6ZT1hLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMub25SZXNpemUoYSl9LHRoaXMpLHRoaXMuZS5fdHJhbnNpdGlvbkVuZD1hLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMudHJhbnNpdGlvbkVuZChhKX0sdGhpcyksdGhpcy5lLl9wcmV2ZW50Q2xpY2s9YS5wcm94eShmdW5jdGlvbihhKXt0aGlzLnByZXZlbnRDbGljayhhKX0sdGhpcyl9LGUucHJvdG90eXBlLm9uVGhyb3R0bGVkUmVzaXplPWZ1bmN0aW9uKCl7Yi5jbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lciksdGhpcy5yZXNpemVUaW1lcj1iLnNldFRpbWVvdXQodGhpcy5lLl9vblJlc2l6ZSx0aGlzLnNldHRpbmdzLnJlc3BvbnNpdmVSZWZyZXNoUmF0ZSl9LGUucHJvdG90eXBlLm9uUmVzaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aD90aGlzLl93aWR0aD09PXRoaXMuJGVsZW1lbnQud2lkdGgoKT8hMTp0aGlzLnRyaWdnZXIoXCJyZXNpemVcIikuaXNEZWZhdWx0UHJldmVudGVkKCk/ITE6KHRoaXMuX3dpZHRoPXRoaXMuJGVsZW1lbnQud2lkdGgoKSx0aGlzLmludmFsaWRhdGUoXCJ3aWR0aFwiKSx0aGlzLnJlZnJlc2goKSx2b2lkIHRoaXMudHJpZ2dlcihcInJlc2l6ZWRcIikpOiExfSxlLnByb3RvdHlwZS5ldmVudHNSb3V0ZXI9ZnVuY3Rpb24oYSl7dmFyIGI9YS50eXBlO1wibW91c2Vkb3duXCI9PT1ifHxcInRvdWNoc3RhcnRcIj09PWI/dGhpcy5vbkRyYWdTdGFydChhKTpcIm1vdXNlbW92ZVwiPT09Ynx8XCJ0b3VjaG1vdmVcIj09PWI/dGhpcy5vbkRyYWdNb3ZlKGEpOlwibW91c2V1cFwiPT09Ynx8XCJ0b3VjaGVuZFwiPT09Yj90aGlzLm9uRHJhZ0VuZChhKTpcInRvdWNoY2FuY2VsXCI9PT1iJiZ0aGlzLm9uRHJhZ0VuZChhKX0sZS5wcm90b3R5cGUuaW50ZXJuYWxFdmVudHM9ZnVuY3Rpb24oKXt2YXIgYz0oaygpLGwoKSk7dGhpcy5zZXR0aW5ncy5tb3VzZURyYWc/KHRoaXMuJHN0YWdlLm9uKFwibW91c2Vkb3duXCIsYS5wcm94eShmdW5jdGlvbihhKXt0aGlzLmV2ZW50c1JvdXRlcihhKX0sdGhpcykpLHRoaXMuJHN0YWdlLm9uKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oKXtyZXR1cm4hMX0pLHRoaXMuJHN0YWdlLmdldCgwKS5vbnNlbGVjdHN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuITF9KTp0aGlzLiRlbGVtZW50LmFkZENsYXNzKFwib3dsLXRleHQtc2VsZWN0LW9uXCIpLHRoaXMuc2V0dGluZ3MudG91Y2hEcmFnJiYhYyYmdGhpcy4kc3RhZ2Uub24oXCJ0b3VjaHN0YXJ0IHRvdWNoY2FuY2VsXCIsYS5wcm94eShmdW5jdGlvbihhKXt0aGlzLmV2ZW50c1JvdXRlcihhKX0sdGhpcykpLHRoaXMudHJhbnNpdGlvbkVuZFZlbmRvciYmdGhpcy5vbih0aGlzLiRzdGFnZS5nZXQoMCksdGhpcy50cmFuc2l0aW9uRW5kVmVuZG9yLHRoaXMuZS5fdHJhbnNpdGlvbkVuZCwhMSksdGhpcy5zZXR0aW5ncy5yZXNwb25zaXZlIT09ITEmJnRoaXMub24oYixcInJlc2l6ZVwiLGEucHJveHkodGhpcy5vblRocm90dGxlZFJlc2l6ZSx0aGlzKSl9LGUucHJvdG90eXBlLm9uRHJhZ1N0YXJ0PWZ1bmN0aW9uKGQpe3ZhciBlLGcsaCxpO2lmKGU9ZC5vcmlnaW5hbEV2ZW50fHxkfHxiLmV2ZW50LDM9PT1lLndoaWNofHx0aGlzLnN0YXRlLmlzVG91Y2gpcmV0dXJuITE7aWYoXCJtb3VzZWRvd25cIj09PWUudHlwZSYmdGhpcy4kc3RhZ2UuYWRkQ2xhc3MoXCJvd2wtZ3JhYlwiKSx0aGlzLnRyaWdnZXIoXCJkcmFnXCIpLHRoaXMuZHJhZy5zdGFydFRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCksdGhpcy5zcGVlZCgwKSx0aGlzLnN0YXRlLmlzVG91Y2g9ITAsdGhpcy5zdGF0ZS5pc1Njcm9sbGluZz0hMSx0aGlzLnN0YXRlLmlzU3dpcGluZz0hMSx0aGlzLmRyYWcuZGlzdGFuY2U9MCxnPWYoZSkueCxoPWYoZSkueSx0aGlzLmRyYWcub2Zmc2V0WD10aGlzLiRzdGFnZS5wb3NpdGlvbigpLmxlZnQsdGhpcy5kcmFnLm9mZnNldFk9dGhpcy4kc3RhZ2UucG9zaXRpb24oKS50b3AsdGhpcy5zZXR0aW5ncy5ydGwmJih0aGlzLmRyYWcub2Zmc2V0WD10aGlzLiRzdGFnZS5wb3NpdGlvbigpLmxlZnQrdGhpcy4kc3RhZ2Uud2lkdGgoKS10aGlzLndpZHRoKCkrdGhpcy5zZXR0aW5ncy5tYXJnaW4pLHRoaXMuc3RhdGUuaW5Nb3Rpb24mJnRoaXMuc3VwcG9ydDNkKWk9dGhpcy5nZXRUcmFuc2Zvcm1Qcm9wZXJ0eSgpLHRoaXMuZHJhZy5vZmZzZXRYPWksdGhpcy5hbmltYXRlKGkpLHRoaXMuc3RhdGUuaW5Nb3Rpb249ITA7ZWxzZSBpZih0aGlzLnN0YXRlLmluTW90aW9uJiYhdGhpcy5zdXBwb3J0M2QpcmV0dXJuIHRoaXMuc3RhdGUuaW5Nb3Rpb249ITEsITE7dGhpcy5kcmFnLnN0YXJ0WD1nLXRoaXMuZHJhZy5vZmZzZXRYLHRoaXMuZHJhZy5zdGFydFk9aC10aGlzLmRyYWcub2Zmc2V0WSx0aGlzLmRyYWcuc3RhcnQ9Zy10aGlzLmRyYWcuc3RhcnRYLHRoaXMuZHJhZy50YXJnZXRFbD1lLnRhcmdldHx8ZS5zcmNFbGVtZW50LHRoaXMuZHJhZy51cGRhdGVkWD10aGlzLmRyYWcuc3RhcnQsKFwiSU1HXCI9PT10aGlzLmRyYWcudGFyZ2V0RWwudGFnTmFtZXx8XCJBXCI9PT10aGlzLmRyYWcudGFyZ2V0RWwudGFnTmFtZSkmJih0aGlzLmRyYWcudGFyZ2V0RWwuZHJhZ2dhYmxlPSExKSxhKGMpLm9uKFwibW91c2Vtb3ZlLm93bC5kcmFnRXZlbnRzIG1vdXNldXAub3dsLmRyYWdFdmVudHMgdG91Y2htb3ZlLm93bC5kcmFnRXZlbnRzIHRvdWNoZW5kLm93bC5kcmFnRXZlbnRzXCIsYS5wcm94eShmdW5jdGlvbihhKXt0aGlzLmV2ZW50c1JvdXRlcihhKX0sdGhpcykpfSxlLnByb3RvdHlwZS5vbkRyYWdNb3ZlPWZ1bmN0aW9uKGEpe3ZhciBjLGUsZyxoLGksajt0aGlzLnN0YXRlLmlzVG91Y2gmJih0aGlzLnN0YXRlLmlzU2Nyb2xsaW5nfHwoYz1hLm9yaWdpbmFsRXZlbnR8fGF8fGIuZXZlbnQsZT1mKGMpLngsZz1mKGMpLnksdGhpcy5kcmFnLmN1cnJlbnRYPWUtdGhpcy5kcmFnLnN0YXJ0WCx0aGlzLmRyYWcuY3VycmVudFk9Zy10aGlzLmRyYWcuc3RhcnRZLHRoaXMuZHJhZy5kaXN0YW5jZT10aGlzLmRyYWcuY3VycmVudFgtdGhpcy5kcmFnLm9mZnNldFgsdGhpcy5kcmFnLmRpc3RhbmNlPDA/dGhpcy5zdGF0ZS5kaXJlY3Rpb249dGhpcy5zZXR0aW5ncy5ydGw/XCJyaWdodFwiOlwibGVmdFwiOnRoaXMuZHJhZy5kaXN0YW5jZT4wJiYodGhpcy5zdGF0ZS5kaXJlY3Rpb249dGhpcy5zZXR0aW5ncy5ydGw/XCJsZWZ0XCI6XCJyaWdodFwiKSx0aGlzLnNldHRpbmdzLmxvb3A/dGhpcy5vcCh0aGlzLmRyYWcuY3VycmVudFgsXCI+XCIsdGhpcy5jb29yZGluYXRlcyh0aGlzLm1pbmltdW0oKSkpJiZcInJpZ2h0XCI9PT10aGlzLnN0YXRlLmRpcmVjdGlvbj90aGlzLmRyYWcuY3VycmVudFgtPSh0aGlzLnNldHRpbmdzLmNlbnRlciYmdGhpcy5jb29yZGluYXRlcygwKSktdGhpcy5jb29yZGluYXRlcyh0aGlzLl9pdGVtcy5sZW5ndGgpOnRoaXMub3AodGhpcy5kcmFnLmN1cnJlbnRYLFwiPFwiLHRoaXMuY29vcmRpbmF0ZXModGhpcy5tYXhpbXVtKCkpKSYmXCJsZWZ0XCI9PT10aGlzLnN0YXRlLmRpcmVjdGlvbiYmKHRoaXMuZHJhZy5jdXJyZW50WCs9KHRoaXMuc2V0dGluZ3MuY2VudGVyJiZ0aGlzLmNvb3JkaW5hdGVzKDApKS10aGlzLmNvb3JkaW5hdGVzKHRoaXMuX2l0ZW1zLmxlbmd0aCkpOihoPXRoaXMuY29vcmRpbmF0ZXModGhpcy5zZXR0aW5ncy5ydGw/dGhpcy5tYXhpbXVtKCk6dGhpcy5taW5pbXVtKCkpLGk9dGhpcy5jb29yZGluYXRlcyh0aGlzLnNldHRpbmdzLnJ0bD90aGlzLm1pbmltdW0oKTp0aGlzLm1heGltdW0oKSksaj10aGlzLnNldHRpbmdzLnB1bGxEcmFnP3RoaXMuZHJhZy5kaXN0YW5jZS81OjAsdGhpcy5kcmFnLmN1cnJlbnRYPU1hdGgubWF4KE1hdGgubWluKHRoaXMuZHJhZy5jdXJyZW50WCxoK2opLGkraikpLCh0aGlzLmRyYWcuZGlzdGFuY2U+OHx8dGhpcy5kcmFnLmRpc3RhbmNlPC04KSYmKGMucHJldmVudERlZmF1bHQhPT1kP2MucHJldmVudERlZmF1bHQoKTpjLnJldHVyblZhbHVlPSExLHRoaXMuc3RhdGUuaXNTd2lwaW5nPSEwKSx0aGlzLmRyYWcudXBkYXRlZFg9dGhpcy5kcmFnLmN1cnJlbnRYLCh0aGlzLmRyYWcuY3VycmVudFk+MTZ8fHRoaXMuZHJhZy5jdXJyZW50WTwtMTYpJiZ0aGlzLnN0YXRlLmlzU3dpcGluZz09PSExJiYodGhpcy5zdGF0ZS5pc1Njcm9sbGluZz0hMCx0aGlzLmRyYWcudXBkYXRlZFg9dGhpcy5kcmFnLnN0YXJ0KSx0aGlzLmFuaW1hdGUodGhpcy5kcmFnLnVwZGF0ZWRYKSkpfSxlLnByb3RvdHlwZS5vbkRyYWdFbmQ9ZnVuY3Rpb24oYil7dmFyIGQsZSxmO2lmKHRoaXMuc3RhdGUuaXNUb3VjaCl7aWYoXCJtb3VzZXVwXCI9PT1iLnR5cGUmJnRoaXMuJHN0YWdlLnJlbW92ZUNsYXNzKFwib3dsLWdyYWJcIiksdGhpcy50cmlnZ2VyKFwiZHJhZ2dlZFwiKSx0aGlzLmRyYWcudGFyZ2V0RWwucmVtb3ZlQXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIpLHRoaXMuc3RhdGUuaXNUb3VjaD0hMSx0aGlzLnN0YXRlLmlzU2Nyb2xsaW5nPSExLHRoaXMuc3RhdGUuaXNTd2lwaW5nPSExLDA9PT10aGlzLmRyYWcuZGlzdGFuY2UmJnRoaXMuc3RhdGUuaW5Nb3Rpb24hPT0hMClyZXR1cm4gdGhpcy5zdGF0ZS5pbk1vdGlvbj0hMSwhMTt0aGlzLmRyYWcuZW5kVGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxkPXRoaXMuZHJhZy5lbmRUaW1lLXRoaXMuZHJhZy5zdGFydFRpbWUsZT1NYXRoLmFicyh0aGlzLmRyYWcuZGlzdGFuY2UpLChlPjN8fGQ+MzAwKSYmdGhpcy5yZW1vdmVDbGljayh0aGlzLmRyYWcudGFyZ2V0RWwpLGY9dGhpcy5jbG9zZXN0KHRoaXMuZHJhZy51cGRhdGVkWCksdGhpcy5zcGVlZCh0aGlzLnNldHRpbmdzLmRyYWdFbmRTcGVlZHx8dGhpcy5zZXR0aW5ncy5zbWFydFNwZWVkKSx0aGlzLmN1cnJlbnQoZiksdGhpcy5pbnZhbGlkYXRlKFwicG9zaXRpb25cIiksdGhpcy51cGRhdGUoKSx0aGlzLnNldHRpbmdzLnB1bGxEcmFnfHx0aGlzLmRyYWcudXBkYXRlZFghPT10aGlzLmNvb3JkaW5hdGVzKGYpfHx0aGlzLnRyYW5zaXRpb25FbmQoKSx0aGlzLmRyYWcuZGlzdGFuY2U9MCxhKGMpLm9mZihcIi5vd2wuZHJhZ0V2ZW50c1wiKX19LGUucHJvdG90eXBlLnJlbW92ZUNsaWNrPWZ1bmN0aW9uKGMpe3RoaXMuZHJhZy50YXJnZXRFbD1jLGEoYykub24oXCJjbGljay5wcmV2ZW50Q2xpY2tcIix0aGlzLmUuX3ByZXZlbnRDbGljayksYi5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShjKS5vZmYoXCJjbGljay5wcmV2ZW50Q2xpY2tcIil9LDMwMCl9LGUucHJvdG90eXBlLnByZXZlbnRDbGljaz1mdW5jdGlvbihiKXtiLnByZXZlbnREZWZhdWx0P2IucHJldmVudERlZmF1bHQoKTpiLnJldHVyblZhbHVlPSExLGIuc3RvcFByb3BhZ2F0aW9uJiZiLnN0b3BQcm9wYWdhdGlvbigpLGEoYi50YXJnZXQpLm9mZihcImNsaWNrLnByZXZlbnRDbGlja1wiKX0sZS5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtUHJvcGVydHk9ZnVuY3Rpb24oKXt2YXIgYSxjO3JldHVybiBhPWIuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLiRzdGFnZS5nZXQoMCksbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSh0aGlzLnZlbmRvck5hbWUrXCJ0cmFuc2Zvcm1cIiksYT1hLnJlcGxhY2UoL21hdHJpeCgzZCk/XFwofFxcKS9nLFwiXCIpLnNwbGl0KFwiLFwiKSxjPTE2PT09YS5sZW5ndGgsYyE9PSEwP2FbNF06YVsxMl19LGUucHJvdG90eXBlLmNsb3Nlc3Q9ZnVuY3Rpb24oYil7dmFyIGM9LTEsZD0zMCxlPXRoaXMud2lkdGgoKSxmPXRoaXMuY29vcmRpbmF0ZXMoKTtyZXR1cm4gdGhpcy5zZXR0aW5ncy5mcmVlRHJhZ3x8YS5lYWNoKGYsYS5wcm94eShmdW5jdGlvbihhLGcpe3JldHVybiBiPmctZCYmZytkPmI/Yz1hOnRoaXMub3AoYixcIjxcIixnKSYmdGhpcy5vcChiLFwiPlwiLGZbYSsxXXx8Zy1lKSYmKGM9XCJsZWZ0XCI9PT10aGlzLnN0YXRlLmRpcmVjdGlvbj9hKzE6YSksLTE9PT1jfSx0aGlzKSksdGhpcy5zZXR0aW5ncy5sb29wfHwodGhpcy5vcChiLFwiPlwiLGZbdGhpcy5taW5pbXVtKCldKT9jPWI9dGhpcy5taW5pbXVtKCk6dGhpcy5vcChiLFwiPFwiLGZbdGhpcy5tYXhpbXVtKCldKSYmKGM9Yj10aGlzLm1heGltdW0oKSkpLGN9LGUucHJvdG90eXBlLmFuaW1hdGU9ZnVuY3Rpb24oYil7dGhpcy50cmlnZ2VyKFwidHJhbnNsYXRlXCIpLHRoaXMuc3RhdGUuaW5Nb3Rpb249dGhpcy5zcGVlZCgpPjAsdGhpcy5zdXBwb3J0M2Q/dGhpcy4kc3RhZ2UuY3NzKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIitiK1wicHgsMHB4LCAwcHgpXCIsdHJhbnNpdGlvbjp0aGlzLnNwZWVkKCkvMWUzK1wic1wifSk6dGhpcy5zdGF0ZS5pc1RvdWNoP3RoaXMuJHN0YWdlLmNzcyh7bGVmdDpiK1wicHhcIn0pOnRoaXMuJHN0YWdlLmFuaW1hdGUoe2xlZnQ6Yn0sdGhpcy5zcGVlZCgpLzFlMyx0aGlzLnNldHRpbmdzLmZhbGxiYWNrRWFzaW5nLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLnN0YXRlLmluTW90aW9uJiZ0aGlzLnRyYW5zaXRpb25FbmQoKX0sdGhpcykpfSxlLnByb3RvdHlwZS5jdXJyZW50PWZ1bmN0aW9uKGEpe2lmKGE9PT1kKXJldHVybiB0aGlzLl9jdXJyZW50O2lmKDA9PT10aGlzLl9pdGVtcy5sZW5ndGgpcmV0dXJuIGQ7aWYoYT10aGlzLm5vcm1hbGl6ZShhKSx0aGlzLl9jdXJyZW50IT09YSl7dmFyIGI9dGhpcy50cmlnZ2VyKFwiY2hhbmdlXCIse3Byb3BlcnR5OntuYW1lOlwicG9zaXRpb25cIix2YWx1ZTphfX0pO2IuZGF0YSE9PWQmJihhPXRoaXMubm9ybWFsaXplKGIuZGF0YSkpLHRoaXMuX2N1cnJlbnQ9YSx0aGlzLmludmFsaWRhdGUoXCJwb3NpdGlvblwiKSx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse3Byb3BlcnR5OntuYW1lOlwicG9zaXRpb25cIix2YWx1ZTp0aGlzLl9jdXJyZW50fX0pfXJldHVybiB0aGlzLl9jdXJyZW50fSxlLnByb3RvdHlwZS5pbnZhbGlkYXRlPWZ1bmN0aW9uKGEpe3RoaXMuX2ludmFsaWRhdGVkW2FdPSEwfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbihhKXthPXRoaXMubm9ybWFsaXplKGEpLGEhPT1kJiYodGhpcy5fc3BlZWQ9MCx0aGlzLl9jdXJyZW50PWEsdGhpcy5zdXBwcmVzcyhbXCJ0cmFuc2xhdGVcIixcInRyYW5zbGF0ZWRcIl0pLHRoaXMuYW5pbWF0ZSh0aGlzLmNvb3JkaW5hdGVzKGEpKSx0aGlzLnJlbGVhc2UoW1widHJhbnNsYXRlXCIsXCJ0cmFuc2xhdGVkXCJdKSl9LGUucHJvdG90eXBlLm5vcm1hbGl6ZT1mdW5jdGlvbihiLGMpe3ZhciBlPWM/dGhpcy5faXRlbXMubGVuZ3RoOnRoaXMuX2l0ZW1zLmxlbmd0aCt0aGlzLl9jbG9uZXMubGVuZ3RoO3JldHVybiFhLmlzTnVtZXJpYyhiKXx8MT5lP2Q6Yj10aGlzLl9jbG9uZXMubGVuZ3RoPyhiJWUrZSklZTpNYXRoLm1heCh0aGlzLm1pbmltdW0oYyksTWF0aC5taW4odGhpcy5tYXhpbXVtKGMpLGIpKX0sZS5wcm90b3R5cGUucmVsYXRpdmU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dGhpcy5ub3JtYWxpemUoYSksYS09dGhpcy5fY2xvbmVzLmxlbmd0aC8yLHRoaXMubm9ybWFsaXplKGEsITApfSxlLnByb3RvdHlwZS5tYXhpbXVtPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPTAsZj10aGlzLnNldHRpbmdzO2lmKGEpcmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aC0xO2lmKCFmLmxvb3AmJmYuY2VudGVyKWI9dGhpcy5faXRlbXMubGVuZ3RoLTE7ZWxzZSBpZihmLmxvb3B8fGYuY2VudGVyKWlmKGYubG9vcHx8Zi5jZW50ZXIpYj10aGlzLl9pdGVtcy5sZW5ndGgrZi5pdGVtcztlbHNle2lmKCFmLmF1dG9XaWR0aCYmIWYubWVyZ2UpdGhyb3dcIkNhbiBub3QgZGV0ZWN0IG1heGltdW0gYWJzb2x1dGUgcG9zaXRpb24uXCI7Zm9yKHJldmVydD1mLnJ0bD8xOi0xLGM9dGhpcy4kc3RhZ2Uud2lkdGgoKS10aGlzLiRlbGVtZW50LndpZHRoKCk7KGQ9dGhpcy5jb29yZGluYXRlcyhlKSkmJiEoZCpyZXZlcnQ+PWMpOyliPSsrZX1lbHNlIGI9dGhpcy5faXRlbXMubGVuZ3RoLWYuaXRlbXM7cmV0dXJuIGJ9LGUucHJvdG90eXBlLm1pbmltdW09ZnVuY3Rpb24oYSl7cmV0dXJuIGE/MDp0aGlzLl9jbG9uZXMubGVuZ3RoLzJ9LGUucHJvdG90eXBlLml0ZW1zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09ZD90aGlzLl9pdGVtcy5zbGljZSgpOihhPXRoaXMubm9ybWFsaXplKGEsITApLHRoaXMuX2l0ZW1zW2FdKX0sZS5wcm90b3R5cGUubWVyZ2Vycz1mdW5jdGlvbihhKXtyZXR1cm4gYT09PWQ/dGhpcy5fbWVyZ2Vycy5zbGljZSgpOihhPXRoaXMubm9ybWFsaXplKGEsITApLHRoaXMuX21lcmdlcnNbYV0pfSxlLnByb3RvdHlwZS5jbG9uZXM9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5fY2xvbmVzLmxlbmd0aC8yLGU9Yyt0aGlzLl9pdGVtcy5sZW5ndGgsZj1mdW5jdGlvbihhKXtyZXR1cm4gYSUyPT09MD9lK2EvMjpjLShhKzEpLzJ9O3JldHVybiBiPT09ZD9hLm1hcCh0aGlzLl9jbG9uZXMsZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihiKX0pOmEubWFwKHRoaXMuX2Nsb25lcyxmdW5jdGlvbihhLGMpe3JldHVybiBhPT09Yj9mKGMpOm51bGx9KX0sZS5wcm90b3R5cGUuc3BlZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT1kJiYodGhpcy5fc3BlZWQ9YSksdGhpcy5fc3BlZWR9LGUucHJvdG90eXBlLmNvb3JkaW5hdGVzPWZ1bmN0aW9uKGIpe3ZhciBjPW51bGw7cmV0dXJuIGI9PT1kP2EubWFwKHRoaXMuX2Nvb3JkaW5hdGVzLGEucHJveHkoZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlcyhiKX0sdGhpcykpOih0aGlzLnNldHRpbmdzLmNlbnRlcj8oYz10aGlzLl9jb29yZGluYXRlc1tiXSxjKz0odGhpcy53aWR0aCgpLWMrKHRoaXMuX2Nvb3JkaW5hdGVzW2ItMV18fDApKS8yKih0aGlzLnNldHRpbmdzLnJ0bD8tMToxKSk6Yz10aGlzLl9jb29yZGluYXRlc1tiLTFdfHwwLGMpfSxlLnByb3RvdHlwZS5kdXJhdGlvbj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KE1hdGguYWJzKGItYSksMSksNikqTWF0aC5hYnMoY3x8dGhpcy5zZXR0aW5ncy5zbWFydFNwZWVkKX0sZS5wcm90b3R5cGUudG89ZnVuY3Rpb24oYyxkKXtpZih0aGlzLnNldHRpbmdzLmxvb3Ape3ZhciBlPWMtdGhpcy5yZWxhdGl2ZSh0aGlzLmN1cnJlbnQoKSksZj10aGlzLmN1cnJlbnQoKSxnPXRoaXMuY3VycmVudCgpLGg9dGhpcy5jdXJyZW50KCkrZSxpPTA+Zy1oPyEwOiExLGo9dGhpcy5fY2xvbmVzLmxlbmd0aCt0aGlzLl9pdGVtcy5sZW5ndGg7aDx0aGlzLnNldHRpbmdzLml0ZW1zJiZpPT09ITE/KGY9Zyt0aGlzLl9pdGVtcy5sZW5ndGgsdGhpcy5yZXNldChmKSk6aD49ai10aGlzLnNldHRpbmdzLml0ZW1zJiZpPT09ITAmJihmPWctdGhpcy5faXRlbXMubGVuZ3RoLHRoaXMucmVzZXQoZikpLGIuY2xlYXJUaW1lb3V0KHRoaXMuZS5fZ29Ub0xvb3ApLHRoaXMuZS5fZ29Ub0xvb3A9Yi5zZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLnNwZWVkKHRoaXMuZHVyYXRpb24odGhpcy5jdXJyZW50KCksZitlLGQpKSx0aGlzLmN1cnJlbnQoZitlKSx0aGlzLnVwZGF0ZSgpfSx0aGlzKSwzMCl9ZWxzZSB0aGlzLnNwZWVkKHRoaXMuZHVyYXRpb24odGhpcy5jdXJyZW50KCksYyxkKSksdGhpcy5jdXJyZW50KGMpLHRoaXMudXBkYXRlKCl9LGUucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oYSl7YT1hfHwhMSx0aGlzLnRvKHRoaXMucmVsYXRpdmUodGhpcy5jdXJyZW50KCkpKzEsYSl9LGUucHJvdG90eXBlLnByZXY9ZnVuY3Rpb24oYSl7YT1hfHwhMSx0aGlzLnRvKHRoaXMucmVsYXRpdmUodGhpcy5jdXJyZW50KCkpLTEsYSl9LGUucHJvdG90eXBlLnRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT1kJiYoYS5zdG9wUHJvcGFnYXRpb24oKSwoYS50YXJnZXR8fGEuc3JjRWxlbWVudHx8YS5vcmlnaW5hbFRhcmdldCkhPT10aGlzLiRzdGFnZS5nZXQoMCkpPyExOih0aGlzLnN0YXRlLmluTW90aW9uPSExLHZvaWQgdGhpcy50cmlnZ2VyKFwidHJhbnNsYXRlZFwiKSl9LGUucHJvdG90eXBlLnZpZXdwb3J0PWZ1bmN0aW9uKCl7dmFyIGQ7aWYodGhpcy5vcHRpb25zLnJlc3BvbnNpdmVCYXNlRWxlbWVudCE9PWIpZD1hKHRoaXMub3B0aW9ucy5yZXNwb25zaXZlQmFzZUVsZW1lbnQpLndpZHRoKCk7ZWxzZSBpZihiLmlubmVyV2lkdGgpZD1iLmlubmVyV2lkdGg7ZWxzZXtpZighYy5kb2N1bWVudEVsZW1lbnR8fCFjLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCl0aHJvd1wiQ2FuIG5vdCBkZXRlY3Qgdmlld3BvcnQgd2lkdGguXCI7ZD1jLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aH1yZXR1cm4gZH0sZS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihiKXt0aGlzLiRzdGFnZS5lbXB0eSgpLHRoaXMuX2l0ZW1zPVtdLGImJihiPWIgaW5zdGFuY2VvZiBqUXVlcnk/YjphKGIpKSx0aGlzLnNldHRpbmdzLm5lc3RlZEl0ZW1TZWxlY3RvciYmKGI9Yi5maW5kKFwiLlwiK3RoaXMuc2V0dGluZ3MubmVzdGVkSXRlbVNlbGVjdG9yKSksYi5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMubm9kZVR5cGV9KS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYSxiKXtiPXRoaXMucHJlcGFyZShiKSx0aGlzLiRzdGFnZS5hcHBlbmQoYiksdGhpcy5faXRlbXMucHVzaChiKSx0aGlzLl9tZXJnZXJzLnB1c2goMSpiLmZpbmQoXCJbZGF0YS1tZXJnZV1cIikuYW5kU2VsZihcIltkYXRhLW1lcmdlXVwiKS5hdHRyKFwiZGF0YS1tZXJnZVwiKXx8MSl9LHRoaXMpKSx0aGlzLnJlc2V0KGEuaXNOdW1lcmljKHRoaXMuc2V0dGluZ3Muc3RhcnRQb3NpdGlvbik/dGhpcy5zZXR0aW5ncy5zdGFydFBvc2l0aW9uOjApLHRoaXMuaW52YWxpZGF0ZShcIml0ZW1zXCIpfSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSxiKXtiPWI9PT1kP3RoaXMuX2l0ZW1zLmxlbmd0aDp0aGlzLm5vcm1hbGl6ZShiLCEwKSx0aGlzLnRyaWdnZXIoXCJhZGRcIix7Y29udGVudDphLHBvc2l0aW9uOmJ9KSwwPT09dGhpcy5faXRlbXMubGVuZ3RofHxiPT09dGhpcy5faXRlbXMubGVuZ3RoPyh0aGlzLiRzdGFnZS5hcHBlbmQoYSksdGhpcy5faXRlbXMucHVzaChhKSx0aGlzLl9tZXJnZXJzLnB1c2goMSphLmZpbmQoXCJbZGF0YS1tZXJnZV1cIikuYW5kU2VsZihcIltkYXRhLW1lcmdlXVwiKS5hdHRyKFwiZGF0YS1tZXJnZVwiKXx8MSkpOih0aGlzLl9pdGVtc1tiXS5iZWZvcmUoYSksdGhpcy5faXRlbXMuc3BsaWNlKGIsMCxhKSx0aGlzLl9tZXJnZXJzLnNwbGljZShiLDAsMSphLmZpbmQoXCJbZGF0YS1tZXJnZV1cIikuYW5kU2VsZihcIltkYXRhLW1lcmdlXVwiKS5hdHRyKFwiZGF0YS1tZXJnZVwiKXx8MSkpLHRoaXMuaW52YWxpZGF0ZShcIml0ZW1zXCIpLHRoaXMudHJpZ2dlcihcImFkZGVkXCIse2NvbnRlbnQ6YSxwb3NpdGlvbjpifSl9LGUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihhKXthPXRoaXMubm9ybWFsaXplKGEsITApLGEhPT1kJiYodGhpcy50cmlnZ2VyKFwicmVtb3ZlXCIse2NvbnRlbnQ6dGhpcy5faXRlbXNbYV0scG9zaXRpb246YX0pLHRoaXMuX2l0ZW1zW2FdLnJlbW92ZSgpLHRoaXMuX2l0ZW1zLnNwbGljZShhLDEpLHRoaXMuX21lcmdlcnMuc3BsaWNlKGEsMSksdGhpcy5pbnZhbGlkYXRlKFwiaXRlbXNcIiksdGhpcy50cmlnZ2VyKFwicmVtb3ZlZFwiLHtjb250ZW50Om51bGwscG9zaXRpb246YX0pKX0sZS5wcm90b3R5cGUuYWRkVHJpZ2dlcmFibGVFdmVudHM9ZnVuY3Rpb24oKXt2YXIgYj1hLnByb3h5KGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEucHJveHkoZnVuY3Rpb24oYSl7YS5yZWxhdGVkVGFyZ2V0IT09dGhpcyYmKHRoaXMuc3VwcHJlc3MoW2NdKSxiLmFwcGx5KHRoaXMsW10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpLHRoaXMucmVsZWFzZShbY10pKX0sdGhpcyl9LHRoaXMpO2EuZWFjaCh7bmV4dDp0aGlzLm5leHQscHJldjp0aGlzLnByZXYsdG86dGhpcy50byxkZXN0cm95OnRoaXMuZGVzdHJveSxyZWZyZXNoOnRoaXMucmVmcmVzaCxyZXBsYWNlOnRoaXMucmVwbGFjZSxhZGQ6dGhpcy5hZGQscmVtb3ZlOnRoaXMucmVtb3ZlfSxhLnByb3h5KGZ1bmN0aW9uKGEsYyl7dGhpcy4kZWxlbWVudC5vbihhK1wiLm93bC5jYXJvdXNlbFwiLGIoYyxhK1wiLm93bC5jYXJvdXNlbFwiKSl9LHRoaXMpKX0sZS5wcm90b3R5cGUud2F0Y2hWaXNpYmlsaXR5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5vZmZzZXRXaWR0aD4wJiZhLm9mZnNldEhlaWdodD4wfWZ1bmN0aW9uIGQoKXtjKHRoaXMuJGVsZW1lbnQuZ2V0KDApKSYmKHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJvd2wtaGlkZGVuXCIpLHRoaXMucmVmcmVzaCgpLGIuY2xlYXJJbnRlcnZhbCh0aGlzLmUuX2NoZWNrVmlzaWJpbGUpKX1jKHRoaXMuJGVsZW1lbnQuZ2V0KDApKXx8KHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoXCJvd2wtaGlkZGVuXCIpLGIuY2xlYXJJbnRlcnZhbCh0aGlzLmUuX2NoZWNrVmlzaWJpbGUpLHRoaXMuZS5fY2hlY2tWaXNpYmlsZT1iLnNldEludGVydmFsKGEucHJveHkoZCx0aGlzKSw1MDApKX0sZS5wcm90b3R5cGUucHJlbG9hZEF1dG9XaWR0aEltYWdlcz1mdW5jdGlvbihiKXt2YXIgYyxkLGUsZjtjPTAsZD10aGlzLGIuZWFjaChmdW5jdGlvbihnLGgpe2U9YShoKSxmPW5ldyBJbWFnZSxmLm9ubG9hZD1mdW5jdGlvbigpe2MrKyxlLmF0dHIoXCJzcmNcIixmLnNyYyksZS5jc3MoXCJvcGFjaXR5XCIsMSksYz49Yi5sZW5ndGgmJihkLnN0YXRlLmltYWdlc0xvYWRlZD0hMCxkLmluaXRpYWxpemUoKSl9LGYuc3JjPWUuYXR0cihcInNyY1wiKXx8ZS5hdHRyKFwiZGF0YS1zcmNcIil8fGUuYXR0cihcImRhdGEtc3JjLXJldGluYVwiKX0pfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5oYXNDbGFzcyh0aGlzLnNldHRpbmdzLnRoZW1lQ2xhc3MpJiZ0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMuc2V0dGluZ3MudGhlbWVDbGFzcyksdGhpcy5zZXR0aW5ncy5yZXNwb25zaXZlIT09ITEmJmEoYikub2ZmKFwicmVzaXplLm93bC5jYXJvdXNlbFwiKSx0aGlzLnRyYW5zaXRpb25FbmRWZW5kb3ImJnRoaXMub2ZmKHRoaXMuJHN0YWdlLmdldCgwKSx0aGlzLnRyYW5zaXRpb25FbmRWZW5kb3IsdGhpcy5lLl90cmFuc2l0aW9uRW5kKTtmb3IodmFyIGQgaW4gdGhpcy5fcGx1Z2lucyl0aGlzLl9wbHVnaW5zW2RdLmRlc3Ryb3koKTsodGhpcy5zZXR0aW5ncy5tb3VzZURyYWd8fHRoaXMuc2V0dGluZ3MudG91Y2hEcmFnKSYmKHRoaXMuJHN0YWdlLm9mZihcIm1vdXNlZG93biB0b3VjaHN0YXJ0IHRvdWNoY2FuY2VsXCIpLGEoYykub2ZmKFwiLm93bC5kcmFnRXZlbnRzXCIpLHRoaXMuJHN0YWdlLmdldCgwKS5vbnNlbGVjdHN0YXJ0PWZ1bmN0aW9uKCl7fSx0aGlzLiRzdGFnZS5vZmYoXCJkcmFnc3RhcnRcIixmdW5jdGlvbigpe3JldHVybiExfSkpLHRoaXMuJGVsZW1lbnQub2ZmKFwiLm93bFwiKSx0aGlzLiRzdGFnZS5jaGlsZHJlbihcIi5jbG9uZWRcIikucmVtb3ZlKCksdGhpcy5lPW51bGwsdGhpcy4kZWxlbWVudC5yZW1vdmVEYXRhKFwib3dsQ2Fyb3VzZWxcIiksdGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5jb250ZW50cygpLnVud3JhcCgpLHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkudW53cmFwKCksdGhpcy4kc3RhZ2UudW53cmFwKCl9LGUucHJvdG90eXBlLm9wPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnNldHRpbmdzLnJ0bDtzd2l0Y2goYil7Y2FzZVwiPFwiOnJldHVybiBkP2E+YzpjPmE7Y2FzZVwiPlwiOnJldHVybiBkP2M+YTphPmM7Y2FzZVwiPj1cIjpyZXR1cm4gZD9jPj1hOmE+PWM7Y2FzZVwiPD1cIjpyZXR1cm4gZD9hPj1jOmM+PWF9fSxlLnByb3RvdHlwZS5vbj1mdW5jdGlvbihhLGIsYyxkKXthLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKGIsYyxkKTphLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KFwib25cIitiLGMpfSxlLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oYSxiLGMsZCl7YS5yZW1vdmVFdmVudExpc3RlbmVyP2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsZCk6YS5kZXRhY2hFdmVudCYmYS5kZXRhY2hFdmVudChcIm9uXCIrYixjKX0sZS5wcm90b3R5cGUudHJpZ2dlcj1mdW5jdGlvbihiLGMsZCl7dmFyIGU9e2l0ZW06e2NvdW50OnRoaXMuX2l0ZW1zLmxlbmd0aCxpbmRleDp0aGlzLmN1cnJlbnQoKX19LGY9YS5jYW1lbENhc2UoYS5ncmVwKFtcIm9uXCIsYixkXSxmdW5jdGlvbihhKXtyZXR1cm4gYX0pLmpvaW4oXCItXCIpLnRvTG93ZXJDYXNlKCkpLGc9YS5FdmVudChbYixcIm93bFwiLGR8fFwiY2Fyb3VzZWxcIl0uam9pbihcIi5cIikudG9Mb3dlckNhc2UoKSxhLmV4dGVuZCh7cmVsYXRlZFRhcmdldDp0aGlzfSxlLGMpKTtyZXR1cm4gdGhpcy5fc3VwcmVzc1tiXXx8KGEuZWFjaCh0aGlzLl9wbHVnaW5zLGZ1bmN0aW9uKGEsYil7Yi5vblRyaWdnZXImJmIub25UcmlnZ2VyKGcpfSksdGhpcy4kZWxlbWVudC50cmlnZ2VyKGcpLHRoaXMuc2V0dGluZ3MmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuc2V0dGluZ3NbZl0mJnRoaXMuc2V0dGluZ3NbZl0uYXBwbHkodGhpcyxnKSksZ30sZS5wcm90b3R5cGUuc3VwcHJlc3M9ZnVuY3Rpb24oYil7YS5lYWNoKGIsYS5wcm94eShmdW5jdGlvbihhLGIpe3RoaXMuX3N1cHJlc3NbYl09ITB9LHRoaXMpKX0sZS5wcm90b3R5cGUucmVsZWFzZT1mdW5jdGlvbihiKXthLmVhY2goYixhLnByb3h5KGZ1bmN0aW9uKGEsYil7ZGVsZXRlIHRoaXMuX3N1cHJlc3NbYl19LHRoaXMpKX0sZS5wcm90b3R5cGUuYnJvd3NlclN1cHBvcnQ9ZnVuY3Rpb24oKXtpZih0aGlzLnN1cHBvcnQzZD1qKCksdGhpcy5zdXBwb3J0M2Qpe3RoaXMudHJhbnNmb3JtVmVuZG9yPWkoKTt2YXIgYT1bXCJ0cmFuc2l0aW9uZW5kXCIsXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsXCJ0cmFuc2l0aW9uZW5kXCIsXCJvVHJhbnNpdGlvbkVuZFwiXTt0aGlzLnRyYW5zaXRpb25FbmRWZW5kb3I9YVtoKCldLHRoaXMudmVuZG9yTmFtZT10aGlzLnRyYW5zZm9ybVZlbmRvci5yZXBsYWNlKC9UcmFuc2Zvcm0vaSxcIlwiKSx0aGlzLnZlbmRvck5hbWU9XCJcIiE9PXRoaXMudmVuZG9yTmFtZT9cIi1cIit0aGlzLnZlbmRvck5hbWUudG9Mb3dlckNhc2UoKStcIi1cIjpcIlwifXRoaXMuc3RhdGUub3JpZW50YXRpb249Yi5vcmllbnRhdGlvbn0sYS5mbi5vd2xDYXJvdXNlbD1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS5kYXRhKFwib3dsQ2Fyb3VzZWxcIil8fGEodGhpcykuZGF0YShcIm93bENhcm91c2VsXCIsbmV3IGUodGhpcyxiKSl9KX0sYS5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvcj1lfSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGIpe3RoaXMuX2NvcmU9Yix0aGlzLl9sb2FkZWQ9W10sdGhpcy5faGFuZGxlcnM9e1wiaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsIGNoYW5nZS5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGIpe2lmKGIubmFtZXNwYWNlJiZ0aGlzLl9jb3JlLnNldHRpbmdzJiZ0aGlzLl9jb3JlLnNldHRpbmdzLmxhenlMb2FkJiYoYi5wcm9wZXJ0eSYmXCJwb3NpdGlvblwiPT1iLnByb3BlcnR5Lm5hbWV8fFwiaW5pdGlhbGl6ZWRcIj09Yi50eXBlKSlmb3IodmFyIGM9dGhpcy5fY29yZS5zZXR0aW5ncyxkPWMuY2VudGVyJiZNYXRoLmNlaWwoYy5pdGVtcy8yKXx8Yy5pdGVtcyxlPWMuY2VudGVyJiYtMSpkfHwwLGY9KGIucHJvcGVydHkmJmIucHJvcGVydHkudmFsdWV8fHRoaXMuX2NvcmUuY3VycmVudCgpKStlLGc9dGhpcy5fY29yZS5jbG9uZXMoKS5sZW5ndGgsaD1hLnByb3h5KGZ1bmN0aW9uKGEsYil7dGhpcy5sb2FkKGIpfSx0aGlzKTtlKys8ZDspdGhpcy5sb2FkKGcvMit0aGlzLl9jb3JlLnJlbGF0aXZlKGYpKSxnJiZhLmVhY2godGhpcy5fY29yZS5jbG9uZXModGhpcy5fY29yZS5yZWxhdGl2ZShmKyspKSxoKX0sdGhpcyl9LHRoaXMuX2NvcmUub3B0aW9ucz1hLmV4dGVuZCh7fSxjLkRlZmF1bHRzLHRoaXMuX2NvcmUub3B0aW9ucyksdGhpcy5fY29yZS4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyl9O2MuRGVmYXVsdHM9e2xhenlMb2FkOiExfSxjLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2NvcmUuJHN0YWdlLmNoaWxkcmVuKCkuZXEoYyksZT1kJiZkLmZpbmQoXCIub3dsLWxhenlcIik7IWV8fGEuaW5BcnJheShkLmdldCgwKSx0aGlzLl9sb2FkZWQpPi0xfHwoZS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoZCksZz1iLmRldmljZVBpeGVsUmF0aW8+MSYmZi5hdHRyKFwiZGF0YS1zcmMtcmV0aW5hXCIpfHxmLmF0dHIoXCJkYXRhLXNyY1wiKTt0aGlzLl9jb3JlLnRyaWdnZXIoXCJsb2FkXCIse2VsZW1lbnQ6Zix1cmw6Z30sXCJsYXp5XCIpLGYuaXMoXCJpbWdcIik/Zi5vbmUoXCJsb2FkLm93bC5sYXp5XCIsYS5wcm94eShmdW5jdGlvbigpe2YuY3NzKFwib3BhY2l0eVwiLDEpLHRoaXMuX2NvcmUudHJpZ2dlcihcImxvYWRlZFwiLHtlbGVtZW50OmYsdXJsOmd9LFwibGF6eVwiKX0sdGhpcykpLmF0dHIoXCJzcmNcIixnKTooZT1uZXcgSW1hZ2UsZS5vbmxvYWQ9YS5wcm94eShmdW5jdGlvbigpe2YuY3NzKHtcImJhY2tncm91bmQtaW1hZ2VcIjpcInVybChcIitnK1wiKVwiLG9wYWNpdHk6XCIxXCJ9KSx0aGlzLl9jb3JlLnRyaWdnZXIoXCJsb2FkZWRcIix7ZWxlbWVudDpmLHVybDpnfSxcImxhenlcIil9LHRoaXMpLGUuc3JjPWcpfSx0aGlzKSksdGhpcy5fbG9hZGVkLnB1c2goZC5nZXQoMCkpKX0sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBhLGI7Zm9yKGEgaW4gdGhpcy5oYW5kbGVycyl0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihhLHRoaXMuaGFuZGxlcnNbYV0pO2ZvcihiIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbYl0mJih0aGlzW2JdPW51bGwpfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuTGF6eT1jfSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhKXt2YXIgYj1mdW5jdGlvbihjKXt0aGlzLl9jb3JlPWMsdGhpcy5faGFuZGxlcnM9e1wiaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbigpe3RoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b0hlaWdodCYmdGhpcy51cGRhdGUoKX0sdGhpcyksXCJjaGFuZ2VkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvSGVpZ2h0JiZcInBvc2l0aW9uXCI9PWEucHJvcGVydHkubmFtZSYmdGhpcy51cGRhdGUoKX0sdGhpcyksXCJsb2FkZWQub3dsLmxhenlcIjphLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b0hlaWdodCYmYS5lbGVtZW50LmNsb3Nlc3QoXCIuXCIrdGhpcy5fY29yZS5zZXR0aW5ncy5pdGVtQ2xhc3MpPT09dGhpcy5fY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS5lcSh0aGlzLl9jb3JlLmN1cnJlbnQoKSkmJnRoaXMudXBkYXRlKCl9LHRoaXMpfSx0aGlzLl9jb3JlLm9wdGlvbnM9YS5leHRlbmQoe30sYi5EZWZhdWx0cyx0aGlzLl9jb3JlLm9wdGlvbnMpLHRoaXMuX2NvcmUuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpfTtiLkRlZmF1bHRzPXthdXRvSGVpZ2h0OiExLGF1dG9IZWlnaHRDbGFzczpcIm93bC1oZWlnaHRcIn0sYi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5fY29yZS4kc3RhZ2UucGFyZW50KCkuaGVpZ2h0KHRoaXMuX2NvcmUuJHN0YWdlLmNoaWxkcmVuKCkuZXEodGhpcy5fY29yZS5jdXJyZW50KCkpLmhlaWdodCgpKS5hZGRDbGFzcyh0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9IZWlnaHRDbGFzcyl9LGIucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYSxiO2ZvcihhIGluIHRoaXMuX2hhbmRsZXJzKXRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGEsdGhpcy5faGFuZGxlcnNbYV0pO2ZvcihiIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbYl0mJih0aGlzW2JdPW51bGwpfSxhLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuQXV0b0hlaWdodD1ifSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYil7dGhpcy5fY29yZT1iLHRoaXMuX3ZpZGVvcz17fSx0aGlzLl9wbGF5aW5nPW51bGwsdGhpcy5fZnVsbHNjcmVlbj0hMSx0aGlzLl9oYW5kbGVycz17XCJyZXNpemUub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXt0aGlzLl9jb3JlLnNldHRpbmdzLnZpZGVvJiYhdGhpcy5pc0luRnVsbFNjcmVlbigpJiZhLnByZXZlbnREZWZhdWx0KCl9LHRoaXMpLFwicmVmcmVzaC5vd2wuY2Fyb3VzZWwgY2hhbmdlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5fcGxheWluZyYmdGhpcy5zdG9wKCl9LHRoaXMpLFwicHJlcGFyZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihiKXt2YXIgYz1hKGIuY29udGVudCkuZmluZChcIi5vd2wtdmlkZW9cIik7Yy5sZW5ndGgmJihjLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIiksdGhpcy5mZXRjaChjLGEoYi5jb250ZW50KSkpfSx0aGlzKX0sdGhpcy5fY29yZS5vcHRpb25zPWEuZXh0ZW5kKHt9LGQuRGVmYXVsdHMsdGhpcy5fY29yZS5vcHRpb25zKSx0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKSx0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKFwiY2xpY2sub3dsLnZpZGVvXCIsXCIub3dsLXZpZGVvLXBsYXktaWNvblwiLGEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy5wbGF5KGEpfSx0aGlzKSl9O2QuRGVmYXVsdHM9e3ZpZGVvOiExLHZpZGVvSGVpZ2h0OiExLHZpZGVvV2lkdGg6ITF9LGQucHJvdG90eXBlLmZldGNoPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5hdHRyKFwiZGF0YS12aW1lby1pZFwiKT9cInZpbWVvXCI6XCJ5b3V0dWJlXCIsZD1hLmF0dHIoXCJkYXRhLXZpbWVvLWlkXCIpfHxhLmF0dHIoXCJkYXRhLXlvdXR1YmUtaWRcIiksZT1hLmF0dHIoXCJkYXRhLXdpZHRoXCIpfHx0aGlzLl9jb3JlLnNldHRpbmdzLnZpZGVvV2lkdGgsZj1hLmF0dHIoXCJkYXRhLWhlaWdodFwiKXx8dGhpcy5fY29yZS5zZXR0aW5ncy52aWRlb0hlaWdodCxnPWEuYXR0cihcImhyZWZcIik7aWYoIWcpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyB2aWRlbyBVUkwuXCIpO2lmKGQ9Zy5tYXRjaCgvKGh0dHA6fGh0dHBzOnwpXFwvXFwvKHBsYXllci58d3d3Lik/KHZpbWVvXFwuY29tfHlvdXR1KGJlXFwuY29tfFxcLmJlfGJlXFwuZ29vZ2xlYXBpc1xcLmNvbSkpXFwvKHZpZGVvXFwvfGVtYmVkXFwvfHdhdGNoXFw/dj18dlxcLyk/KFtBLVphLXowLTkuXyUtXSopKFxcJlxcUyspPy8pLGRbM10uaW5kZXhPZihcInlvdXR1XCIpPi0xKWM9XCJ5b3V0dWJlXCI7ZWxzZXtpZighKGRbM10uaW5kZXhPZihcInZpbWVvXCIpPi0xKSl0aHJvdyBuZXcgRXJyb3IoXCJWaWRlbyBVUkwgbm90IHN1cHBvcnRlZC5cIik7Yz1cInZpbWVvXCJ9ZD1kWzZdLHRoaXMuX3ZpZGVvc1tnXT17dHlwZTpjLGlkOmQsd2lkdGg6ZSxoZWlnaHQ6Zn0sYi5hdHRyKFwiZGF0YS12aWRlb1wiLGcpLHRoaXMudGh1bWJuYWlsKGEsdGhpcy5fdmlkZW9zW2ddKX0sZC5wcm90b3R5cGUudGh1bWJuYWlsPWZ1bmN0aW9uKGIsYyl7dmFyIGQsZSxmLGc9Yy53aWR0aCYmYy5oZWlnaHQ/J3N0eWxlPVwid2lkdGg6JytjLndpZHRoK1wicHg7aGVpZ2h0OlwiK2MuaGVpZ2h0KydweDtcIic6XCJcIixoPWIuZmluZChcImltZ1wiKSxpPVwic3JjXCIsaj1cIlwiLGs9dGhpcy5fY29yZS5zZXR0aW5ncyxsPWZ1bmN0aW9uKGEpe2U9JzxkaXYgY2xhc3M9XCJvd2wtdmlkZW8tcGxheS1pY29uXCI+PC9kaXY+JyxkPWsubGF6eUxvYWQ/JzxkaXYgY2xhc3M9XCJvd2wtdmlkZW8tdG4gJytqKydcIiAnK2krJz1cIicrYSsnXCI+PC9kaXY+JzonPGRpdiBjbGFzcz1cIm93bC12aWRlby10blwiIHN0eWxlPVwib3BhY2l0eToxO2JhY2tncm91bmQtaW1hZ2U6dXJsKCcrYSsnKVwiPjwvZGl2PicsYi5hZnRlcihkKSxiLmFmdGVyKGUpfTtyZXR1cm4gYi53cmFwKCc8ZGl2IGNsYXNzPVwib3dsLXZpZGVvLXdyYXBwZXJcIicrZytcIj48L2Rpdj5cIiksdGhpcy5fY29yZS5zZXR0aW5ncy5sYXp5TG9hZCYmKGk9XCJkYXRhLXNyY1wiLGo9XCJvd2wtbGF6eVwiKSxoLmxlbmd0aD8obChoLmF0dHIoaSkpLGgucmVtb3ZlKCksITEpOnZvaWQoXCJ5b3V0dWJlXCI9PT1jLnR5cGU/KGY9XCJodHRwOi8vaW1nLnlvdXR1YmUuY29tL3ZpL1wiK2MuaWQrXCIvaHFkZWZhdWx0LmpwZ1wiLGwoZikpOlwidmltZW9cIj09PWMudHlwZSYmYS5hamF4KHt0eXBlOlwiR0VUXCIsdXJsOlwiaHR0cDovL3ZpbWVvLmNvbS9hcGkvdjIvdmlkZW8vXCIrYy5pZCtcIi5qc29uXCIsanNvbnA6XCJjYWxsYmFja1wiLGRhdGFUeXBlOlwianNvbnBcIixzdWNjZXNzOmZ1bmN0aW9uKGEpe2Y9YVswXS50aHVtYm5haWxfbGFyZ2UsbChmKX19KSl9LGQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLnRyaWdnZXIoXCJzdG9wXCIsbnVsbCxcInZpZGVvXCIpLHRoaXMuX3BsYXlpbmcuZmluZChcIi5vd2wtdmlkZW8tZnJhbWVcIikucmVtb3ZlKCksdGhpcy5fcGxheWluZy5yZW1vdmVDbGFzcyhcIm93bC12aWRlby1wbGF5aW5nXCIpLHRoaXMuX3BsYXlpbmc9bnVsbH0sZC5wcm90b3R5cGUucGxheT1mdW5jdGlvbihiKXt0aGlzLl9jb3JlLnRyaWdnZXIoXCJwbGF5XCIsbnVsbCxcInZpZGVvXCIpLHRoaXMuX3BsYXlpbmcmJnRoaXMuc3RvcCgpO3ZhciBjLGQsZT1hKGIudGFyZ2V0fHxiLnNyY0VsZW1lbnQpLGY9ZS5jbG9zZXN0KFwiLlwiK3RoaXMuX2NvcmUuc2V0dGluZ3MuaXRlbUNsYXNzKSxnPXRoaXMuX3ZpZGVvc1tmLmF0dHIoXCJkYXRhLXZpZGVvXCIpXSxoPWcud2lkdGh8fFwiMTAwJVwiLGk9Zy5oZWlnaHR8fHRoaXMuX2NvcmUuJHN0YWdlLmhlaWdodCgpO1wieW91dHViZVwiPT09Zy50eXBlP2M9JzxpZnJhbWUgd2lkdGg9XCInK2grJ1wiIGhlaWdodD1cIicraSsnXCIgc3JjPVwiaHR0cDovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8nK2cuaWQrXCI/YXV0b3BsYXk9MSZ2PVwiK2cuaWQrJ1wiIGZyYW1lYm9yZGVyPVwiMFwiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4nOlwidmltZW9cIj09PWcudHlwZSYmKGM9JzxpZnJhbWUgc3JjPVwiaHR0cDovL3BsYXllci52aW1lby5jb20vdmlkZW8vJytnLmlkKyc/YXV0b3BsYXk9MVwiIHdpZHRoPVwiJytoKydcIiBoZWlnaHQ9XCInK2krJ1wiIGZyYW1lYm9yZGVyPVwiMFwiIHdlYmtpdGFsbG93ZnVsbHNjcmVlbiBtb3phbGxvd2Z1bGxzY3JlZW4gYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPicpLGYuYWRkQ2xhc3MoXCJvd2wtdmlkZW8tcGxheWluZ1wiKSx0aGlzLl9wbGF5aW5nPWYsZD1hKCc8ZGl2IHN0eWxlPVwiaGVpZ2h0OicraStcInB4OyB3aWR0aDpcIitoKydweFwiIGNsYXNzPVwib3dsLXZpZGVvLWZyYW1lXCI+JytjK1wiPC9kaXY+XCIpLGUuYWZ0ZXIoZCl9LGQucHJvdG90eXBlLmlzSW5GdWxsU2NyZWVuPWZ1bmN0aW9uKCl7dmFyIGQ9Yy5mdWxsc2NyZWVuRWxlbWVudHx8Yy5tb3pGdWxsU2NyZWVuRWxlbWVudHx8Yy53ZWJraXRGdWxsc2NyZWVuRWxlbWVudDtyZXR1cm4gZCYmYShkKS5wYXJlbnQoKS5oYXNDbGFzcyhcIm93bC12aWRlby1mcmFtZVwiKSYmKHRoaXMuX2NvcmUuc3BlZWQoMCksdGhpcy5fZnVsbHNjcmVlbj0hMCksZCYmdGhpcy5fZnVsbHNjcmVlbiYmdGhpcy5fcGxheWluZz8hMTp0aGlzLl9mdWxsc2NyZWVuPyh0aGlzLl9mdWxsc2NyZWVuPSExLCExKTp0aGlzLl9wbGF5aW5nJiZ0aGlzLl9jb3JlLnN0YXRlLm9yaWVudGF0aW9uIT09Yi5vcmllbnRhdGlvbj8odGhpcy5fY29yZS5zdGF0ZS5vcmllbnRhdGlvbj1iLm9yaWVudGF0aW9uLCExKTohMH0sZC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBhLGI7dGhpcy5fY29yZS4kZWxlbWVudC5vZmYoXCJjbGljay5vd2wudmlkZW9cIik7Zm9yKGEgaW4gdGhpcy5faGFuZGxlcnMpdGhpcy5fY29yZS4kZWxlbWVudC5vZmYoYSx0aGlzLl9oYW5kbGVyc1thXSk7Zm9yKGIgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tiXSYmKHRoaXNbYl09bnVsbCl9LGEuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5WaWRlbz1kfSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1mdW5jdGlvbihiKXt0aGlzLmNvcmU9Yix0aGlzLmNvcmUub3B0aW9ucz1hLmV4dGVuZCh7fSxlLkRlZmF1bHRzLHRoaXMuY29yZS5vcHRpb25zKSx0aGlzLnN3YXBwaW5nPSEwLHRoaXMucHJldmlvdXM9ZCx0aGlzLm5leHQ9ZCx0aGlzLmhhbmRsZXJzPXtcImNoYW5nZS5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe1wicG9zaXRpb25cIj09YS5wcm9wZXJ0eS5uYW1lJiYodGhpcy5wcmV2aW91cz10aGlzLmNvcmUuY3VycmVudCgpLHRoaXMubmV4dD1hLnByb3BlcnR5LnZhbHVlKX0sdGhpcyksXCJkcmFnLm93bC5jYXJvdXNlbCBkcmFnZ2VkLm93bC5jYXJvdXNlbCB0cmFuc2xhdGVkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYSl7dGhpcy5zd2FwcGluZz1cInRyYW5zbGF0ZWRcIj09YS50eXBlfSx0aGlzKSxcInRyYW5zbGF0ZS5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5zd2FwcGluZyYmKHRoaXMuY29yZS5vcHRpb25zLmFuaW1hdGVPdXR8fHRoaXMuY29yZS5vcHRpb25zLmFuaW1hdGVJbikmJnRoaXMuc3dhcCgpfSx0aGlzKX0sdGhpcy5jb3JlLiRlbGVtZW50Lm9uKHRoaXMuaGFuZGxlcnMpfTtlLkRlZmF1bHRzPXthbmltYXRlT3V0OiExLGFuaW1hdGVJbjohMX0sZS5wcm90b3R5cGUuc3dhcD1mdW5jdGlvbigpe2lmKDE9PT10aGlzLmNvcmUuc2V0dGluZ3MuaXRlbXMmJnRoaXMuY29yZS5zdXBwb3J0M2Qpe3RoaXMuY29yZS5zcGVlZCgwKTt2YXIgYixjPWEucHJveHkodGhpcy5jbGVhcix0aGlzKSxkPXRoaXMuY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS5lcSh0aGlzLnByZXZpb3VzKSxlPXRoaXMuY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS5lcSh0aGlzLm5leHQpLGY9dGhpcy5jb3JlLnNldHRpbmdzLmFuaW1hdGVJbixnPXRoaXMuY29yZS5zZXR0aW5ncy5hbmltYXRlT3V0O3RoaXMuY29yZS5jdXJyZW50KCkhPT10aGlzLnByZXZpb3VzJiYoZyYmKGI9dGhpcy5jb3JlLmNvb3JkaW5hdGVzKHRoaXMucHJldmlvdXMpLXRoaXMuY29yZS5jb29yZGluYXRlcyh0aGlzLm5leHQpLGQuY3NzKHtsZWZ0OmIrXCJweFwifSkuYWRkQ2xhc3MoXCJhbmltYXRlZCBvd2wtYW5pbWF0ZWQtb3V0XCIpLmFkZENsYXNzKGcpLm9uZShcIndlYmtpdEFuaW1hdGlvbkVuZCBtb3pBbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBhbmltYXRpb25lbmRcIixjKSksZiYmZS5hZGRDbGFzcyhcImFuaW1hdGVkIG93bC1hbmltYXRlZC1pblwiKS5hZGRDbGFzcyhmKS5vbmUoXCJ3ZWJraXRBbmltYXRpb25FbmQgbW96QW5pbWF0aW9uRW5kIE1TQW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgYW5pbWF0aW9uZW5kXCIsYykpfX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oYil7YShiLnRhcmdldCkuY3NzKHtsZWZ0OlwiXCJ9KS5yZW1vdmVDbGFzcyhcImFuaW1hdGVkIG93bC1hbmltYXRlZC1vdXQgb3dsLWFuaW1hdGVkLWluXCIpLnJlbW92ZUNsYXNzKHRoaXMuY29yZS5zZXR0aW5ncy5hbmltYXRlSW4pLnJlbW92ZUNsYXNzKHRoaXMuY29yZS5zZXR0aW5ncy5hbmltYXRlT3V0KSx0aGlzLmNvcmUudHJhbnNpdGlvbkVuZCgpfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGEsYjtmb3IoYSBpbiB0aGlzLmhhbmRsZXJzKXRoaXMuY29yZS4kZWxlbWVudC5vZmYoYSx0aGlzLmhhbmRsZXJzW2FdKTtmb3IoYiBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSlcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzW2JdJiYodGhpc1tiXT1udWxsKX0sYS5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLkFuaW1hdGU9ZX0od2luZG93LlplcHRvfHx3aW5kb3cualF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGIpe3RoaXMuY29yZT1iLHRoaXMuY29yZS5vcHRpb25zPWEuZXh0ZW5kKHt9LGQuRGVmYXVsdHMsdGhpcy5jb3JlLm9wdGlvbnMpLHRoaXMuaGFuZGxlcnM9e1widHJhbnNsYXRlZC5vd2wuY2Fyb3VzZWwgcmVmcmVzaGVkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmF1dG9wbGF5KClcclxufSx0aGlzKSxcInBsYXkub3dsLmF1dG9wbGF5XCI6YS5wcm94eShmdW5jdGlvbihhLGIsYyl7dGhpcy5wbGF5KGIsYyl9LHRoaXMpLFwic3RvcC5vd2wuYXV0b3BsYXlcIjphLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5zdG9wKCl9LHRoaXMpLFwibW91c2VvdmVyLm93bC5hdXRvcGxheVwiOmEucHJveHkoZnVuY3Rpb24oKXt0aGlzLmNvcmUuc2V0dGluZ3MuYXV0b3BsYXlIb3ZlclBhdXNlJiZ0aGlzLnBhdXNlKCl9LHRoaXMpLFwibW91c2VsZWF2ZS5vd2wuYXV0b3BsYXlcIjphLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5jb3JlLnNldHRpbmdzLmF1dG9wbGF5SG92ZXJQYXVzZSYmdGhpcy5hdXRvcGxheSgpfSx0aGlzKX0sdGhpcy5jb3JlLiRlbGVtZW50Lm9uKHRoaXMuaGFuZGxlcnMpfTtkLkRlZmF1bHRzPXthdXRvcGxheTohMSxhdXRvcGxheVRpbWVvdXQ6NWUzLGF1dG9wbGF5SG92ZXJQYXVzZTohMSxhdXRvcGxheVNwZWVkOiExfSxkLnByb3RvdHlwZS5hdXRvcGxheT1mdW5jdGlvbigpe3RoaXMuY29yZS5zZXR0aW5ncy5hdXRvcGxheSYmIXRoaXMuY29yZS5zdGF0ZS52aWRlb1BsYXk/KGIuY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKSx0aGlzLmludGVydmFsPWIuc2V0SW50ZXJ2YWwoYS5wcm94eShmdW5jdGlvbigpe3RoaXMucGxheSgpfSx0aGlzKSx0aGlzLmNvcmUuc2V0dGluZ3MuYXV0b3BsYXlUaW1lb3V0KSk6Yi5jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpfSxkLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKCl7cmV0dXJuIGMuaGlkZGVuPT09ITB8fHRoaXMuY29yZS5zdGF0ZS5pc1RvdWNofHx0aGlzLmNvcmUuc3RhdGUuaXNTY3JvbGxpbmd8fHRoaXMuY29yZS5zdGF0ZS5pc1N3aXBpbmd8fHRoaXMuY29yZS5zdGF0ZS5pbk1vdGlvbj92b2lkIDA6dGhpcy5jb3JlLnNldHRpbmdzLmF1dG9wbGF5PT09ITE/dm9pZCBiLmNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk6dm9pZCB0aGlzLmNvcmUubmV4dCh0aGlzLmNvcmUuc2V0dGluZ3MuYXV0b3BsYXlTcGVlZCl9LGQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtiLmNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCl9LGQucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7Yi5jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpfSxkLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGEsYztiLmNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7Zm9yKGEgaW4gdGhpcy5oYW5kbGVycyl0aGlzLmNvcmUuJGVsZW1lbnQub2ZmKGEsdGhpcy5oYW5kbGVyc1thXSk7Zm9yKGMgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tjXSYmKHRoaXNbY109bnVsbCl9LGEuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5hdXRvcGxheT1kfSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjt2YXIgYj1mdW5jdGlvbihjKXt0aGlzLl9jb3JlPWMsdGhpcy5faW5pdGlhbGl6ZWQ9ITEsdGhpcy5fcGFnZXM9W10sdGhpcy5fY29udHJvbHM9e30sdGhpcy5fdGVtcGxhdGVzPVtdLHRoaXMuJGVsZW1lbnQ9dGhpcy5fY29yZS4kZWxlbWVudCx0aGlzLl9vdmVycmlkZXM9e25leHQ6dGhpcy5fY29yZS5uZXh0LHByZXY6dGhpcy5fY29yZS5wcmV2LHRvOnRoaXMuX2NvcmUudG99LHRoaXMuX2hhbmRsZXJzPXtcInByZXBhcmVkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYil7dGhpcy5fY29yZS5zZXR0aW5ncy5kb3RzRGF0YSYmdGhpcy5fdGVtcGxhdGVzLnB1c2goYShiLmNvbnRlbnQpLmZpbmQoXCJbZGF0YS1kb3RdXCIpLmFuZFNlbGYoXCJbZGF0YS1kb3RdXCIpLmF0dHIoXCJkYXRhLWRvdFwiKSl9LHRoaXMpLFwiYWRkLm93bC5jYXJvdXNlbFwiOmEucHJveHkoZnVuY3Rpb24oYil7dGhpcy5fY29yZS5zZXR0aW5ncy5kb3RzRGF0YSYmdGhpcy5fdGVtcGxhdGVzLnNwbGljZShiLnBvc2l0aW9uLDAsYShiLmNvbnRlbnQpLmZpbmQoXCJbZGF0YS1kb3RdXCIpLmFuZFNlbGYoXCJbZGF0YS1kb3RdXCIpLmF0dHIoXCJkYXRhLWRvdFwiKSl9LHRoaXMpLFwicmVtb3ZlLm93bC5jYXJvdXNlbCBwcmVwYXJlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuX2NvcmUuc2V0dGluZ3MuZG90c0RhdGEmJnRoaXMuX3RlbXBsYXRlcy5zcGxpY2UoYS5wb3NpdGlvbiwxKX0sdGhpcyksXCJjaGFuZ2Uub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbihhKXtpZihcInBvc2l0aW9uXCI9PWEucHJvcGVydHkubmFtZSYmIXRoaXMuX2NvcmUuc3RhdGUucmV2ZXJ0JiYhdGhpcy5fY29yZS5zZXR0aW5ncy5sb29wJiZ0aGlzLl9jb3JlLnNldHRpbmdzLm5hdlJld2luZCl7dmFyIGI9dGhpcy5fY29yZS5jdXJyZW50KCksYz10aGlzLl9jb3JlLm1heGltdW0oKSxkPXRoaXMuX2NvcmUubWluaW11bSgpO2EuZGF0YT1hLnByb3BlcnR5LnZhbHVlPmM/Yj49Yz9kOmM6YS5wcm9wZXJ0eS52YWx1ZTxkP2M6YS5wcm9wZXJ0eS52YWx1ZX19LHRoaXMpLFwiY2hhbmdlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGEpe1wicG9zaXRpb25cIj09YS5wcm9wZXJ0eS5uYW1lJiZ0aGlzLmRyYXcoKX0sdGhpcyksXCJyZWZyZXNoZWQub3dsLmNhcm91c2VsXCI6YS5wcm94eShmdW5jdGlvbigpe3RoaXMuX2luaXRpYWxpemVkfHwodGhpcy5pbml0aWFsaXplKCksdGhpcy5faW5pdGlhbGl6ZWQ9ITApLHRoaXMuX2NvcmUudHJpZ2dlcihcInJlZnJlc2hcIixudWxsLFwibmF2aWdhdGlvblwiKSx0aGlzLnVwZGF0ZSgpLHRoaXMuZHJhdygpLHRoaXMuX2NvcmUudHJpZ2dlcihcInJlZnJlc2hlZFwiLG51bGwsXCJuYXZpZ2F0aW9uXCIpfSx0aGlzKX0sdGhpcy5fY29yZS5vcHRpb25zPWEuZXh0ZW5kKHt9LGIuRGVmYXVsdHMsdGhpcy5fY29yZS5vcHRpb25zKSx0aGlzLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKX07Yi5EZWZhdWx0cz17bmF2OiExLG5hdlJld2luZDohMCxuYXZUZXh0OltcInByZXZcIixcIm5leHRcIl0sbmF2U3BlZWQ6ITEsbmF2RWxlbWVudDpcImRpdlwiLG5hdkNvbnRhaW5lcjohMSxuYXZDb250YWluZXJDbGFzczpcIm93bC1uYXZcIixuYXZDbGFzczpbXCJvd2wtcHJldlwiLFwib3dsLW5leHRcIl0sc2xpZGVCeToxLGRvdENsYXNzOlwib3dsLWRvdFwiLGRvdHNDbGFzczpcIm93bC1kb3RzXCIsZG90czohMCxkb3RzRWFjaDohMSxkb3REYXRhOiExLGRvdHNTcGVlZDohMSxkb3RzQ29udGFpbmVyOiExLGNvbnRyb2xzQ2xhc3M6XCJvd2wtY29udHJvbHNcIn0sYi5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe3ZhciBiLGMsZD10aGlzLl9jb3JlLnNldHRpbmdzO2QuZG90c0RhdGF8fCh0aGlzLl90ZW1wbGF0ZXM9W2EoXCI8ZGl2PlwiKS5hZGRDbGFzcyhkLmRvdENsYXNzKS5hcHBlbmQoYShcIjxzcGFuPlwiKSkucHJvcChcIm91dGVySFRNTFwiKV0pLGQubmF2Q29udGFpbmVyJiZkLmRvdHNDb250YWluZXJ8fCh0aGlzLl9jb250cm9scy4kY29udGFpbmVyPWEoXCI8ZGl2PlwiKS5hZGRDbGFzcyhkLmNvbnRyb2xzQ2xhc3MpLmFwcGVuZFRvKHRoaXMuJGVsZW1lbnQpKSx0aGlzLl9jb250cm9scy4kaW5kaWNhdG9ycz1kLmRvdHNDb250YWluZXI/YShkLmRvdHNDb250YWluZXIpOmEoXCI8ZGl2PlwiKS5oaWRlKCkuYWRkQ2xhc3MoZC5kb3RzQ2xhc3MpLmFwcGVuZFRvKHRoaXMuX2NvbnRyb2xzLiRjb250YWluZXIpLHRoaXMuX2NvbnRyb2xzLiRpbmRpY2F0b3JzLm9uKFwiY2xpY2tcIixcImRpdlwiLGEucHJveHkoZnVuY3Rpb24oYil7dmFyIGM9YShiLnRhcmdldCkucGFyZW50KCkuaXModGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMpP2EoYi50YXJnZXQpLmluZGV4KCk6YShiLnRhcmdldCkucGFyZW50KCkuaW5kZXgoKTtiLnByZXZlbnREZWZhdWx0KCksdGhpcy50byhjLGQuZG90c1NwZWVkKX0sdGhpcykpLGI9ZC5uYXZDb250YWluZXI/YShkLm5hdkNvbnRhaW5lcik6YShcIjxkaXY+XCIpLmFkZENsYXNzKGQubmF2Q29udGFpbmVyQ2xhc3MpLnByZXBlbmRUbyh0aGlzLl9jb250cm9scy4kY29udGFpbmVyKSx0aGlzLl9jb250cm9scy4kbmV4dD1hKFwiPFwiK2QubmF2RWxlbWVudCtcIj5cIiksdGhpcy5fY29udHJvbHMuJHByZXZpb3VzPXRoaXMuX2NvbnRyb2xzLiRuZXh0LmNsb25lKCksdGhpcy5fY29udHJvbHMuJHByZXZpb3VzLmFkZENsYXNzKGQubmF2Q2xhc3NbMF0pLmh0bWwoZC5uYXZUZXh0WzBdKS5oaWRlKCkucHJlcGVuZFRvKGIpLm9uKFwiY2xpY2tcIixhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5wcmV2KGQubmF2U3BlZWQpfSx0aGlzKSksdGhpcy5fY29udHJvbHMuJG5leHQuYWRkQ2xhc3MoZC5uYXZDbGFzc1sxXSkuaHRtbChkLm5hdlRleHRbMV0pLmhpZGUoKS5hcHBlbmRUbyhiKS5vbihcImNsaWNrXCIsYS5wcm94eShmdW5jdGlvbigpe3RoaXMubmV4dChkLm5hdlNwZWVkKX0sdGhpcykpO2ZvcihjIGluIHRoaXMuX292ZXJyaWRlcyl0aGlzLl9jb3JlW2NdPWEucHJveHkodGhpc1tjXSx0aGlzKX0sYi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBhLGIsYyxkO2ZvcihhIGluIHRoaXMuX2hhbmRsZXJzKXRoaXMuJGVsZW1lbnQub2ZmKGEsdGhpcy5faGFuZGxlcnNbYV0pO2ZvcihiIGluIHRoaXMuX2NvbnRyb2xzKXRoaXMuX2NvbnRyb2xzW2JdLnJlbW92ZSgpO2ZvcihkIGluIHRoaXMub3ZlcmlkZXMpdGhpcy5fY29yZVtkXT10aGlzLl9vdmVycmlkZXNbZF07Zm9yKGMgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tjXSYmKHRoaXNbY109bnVsbCl9LGIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhLGIsYyxkPXRoaXMuX2NvcmUuc2V0dGluZ3MsZT10aGlzLl9jb3JlLmNsb25lcygpLmxlbmd0aC8yLGY9ZSt0aGlzLl9jb3JlLml0ZW1zKCkubGVuZ3RoLGc9ZC5jZW50ZXJ8fGQuYXV0b1dpZHRofHxkLmRvdERhdGE/MTpkLmRvdHNFYWNofHxkLml0ZW1zO2lmKFwicGFnZVwiIT09ZC5zbGlkZUJ5JiYoZC5zbGlkZUJ5PU1hdGgubWluKGQuc2xpZGVCeSxkLml0ZW1zKSksZC5kb3RzfHxcInBhZ2VcIj09ZC5zbGlkZUJ5KWZvcih0aGlzLl9wYWdlcz1bXSxhPWUsYj0wLGM9MDtmPmE7YSsrKShiPj1nfHwwPT09YikmJih0aGlzLl9wYWdlcy5wdXNoKHtzdGFydDphLWUsZW5kOmEtZStnLTF9KSxiPTAsKytjKSxiKz10aGlzLl9jb3JlLm1lcmdlcnModGhpcy5fY29yZS5yZWxhdGl2ZShhKSl9LGIucHJvdG90eXBlLmRyYXc9ZnVuY3Rpb24oKXt2YXIgYixjLGQ9XCJcIixlPXRoaXMuX2NvcmUuc2V0dGluZ3MsZj0odGhpcy5fY29yZS4kc3RhZ2UuY2hpbGRyZW4oKSx0aGlzLl9jb3JlLnJlbGF0aXZlKHRoaXMuX2NvcmUuY3VycmVudCgpKSk7aWYoIWUubmF2fHxlLmxvb3B8fGUubmF2UmV3aW5kfHwodGhpcy5fY29udHJvbHMuJHByZXZpb3VzLnRvZ2dsZUNsYXNzKFwiZGlzYWJsZWRcIiwwPj1mKSx0aGlzLl9jb250cm9scy4kbmV4dC50b2dnbGVDbGFzcyhcImRpc2FibGVkXCIsZj49dGhpcy5fY29yZS5tYXhpbXVtKCkpKSx0aGlzLl9jb250cm9scy4kcHJldmlvdXMudG9nZ2xlKGUubmF2KSx0aGlzLl9jb250cm9scy4kbmV4dC50b2dnbGUoZS5uYXYpLGUuZG90cyl7aWYoYj10aGlzLl9wYWdlcy5sZW5ndGgtdGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMuY2hpbGRyZW4oKS5sZW5ndGgsZS5kb3REYXRhJiYwIT09Yil7Zm9yKGM9MDtjPHRoaXMuX2NvbnRyb2xzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKCkubGVuZ3RoO2MrKylkKz10aGlzLl90ZW1wbGF0ZXNbdGhpcy5fY29yZS5yZWxhdGl2ZShjKV07dGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMuaHRtbChkKX1lbHNlIGI+MD8oZD1uZXcgQXJyYXkoYisxKS5qb2luKHRoaXMuX3RlbXBsYXRlc1swXSksdGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMuYXBwZW5kKGQpKTowPmImJnRoaXMuX2NvbnRyb2xzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKCkuc2xpY2UoYikucmVtb3ZlKCk7dGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMuZmluZChcIi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksdGhpcy5fY29udHJvbHMuJGluZGljYXRvcnMuY2hpbGRyZW4oKS5lcShhLmluQXJyYXkodGhpcy5jdXJyZW50KCksdGhpcy5fcGFnZXMpKS5hZGRDbGFzcyhcImFjdGl2ZVwiKX10aGlzLl9jb250cm9scy4kaW5kaWNhdG9ycy50b2dnbGUoZS5kb3RzKX0sYi5wcm90b3R5cGUub25UcmlnZ2VyPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuX2NvcmUuc2V0dGluZ3M7Yi5wYWdlPXtpbmRleDphLmluQXJyYXkodGhpcy5jdXJyZW50KCksdGhpcy5fcGFnZXMpLGNvdW50OnRoaXMuX3BhZ2VzLmxlbmd0aCxzaXplOmMmJihjLmNlbnRlcnx8Yy5hdXRvV2lkdGh8fGMuZG90RGF0YT8xOmMuZG90c0VhY2h8fGMuaXRlbXMpfX0sYi5wcm90b3R5cGUuY3VycmVudD1mdW5jdGlvbigpe3ZhciBiPXRoaXMuX2NvcmUucmVsYXRpdmUodGhpcy5fY29yZS5jdXJyZW50KCkpO3JldHVybiBhLmdyZXAodGhpcy5fcGFnZXMsZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RhcnQ8PWImJmEuZW5kPj1ifSkucG9wKCl9LGIucHJvdG90eXBlLmdldFBvc2l0aW9uPWZ1bmN0aW9uKGIpe3ZhciBjLGQsZT10aGlzLl9jb3JlLnNldHRpbmdzO3JldHVyblwicGFnZVwiPT1lLnNsaWRlQnk/KGM9YS5pbkFycmF5KHRoaXMuY3VycmVudCgpLHRoaXMuX3BhZ2VzKSxkPXRoaXMuX3BhZ2VzLmxlbmd0aCxiPysrYzotLWMsYz10aGlzLl9wYWdlc1soYyVkK2QpJWRdLnN0YXJ0KTooYz10aGlzLl9jb3JlLnJlbGF0aXZlKHRoaXMuX2NvcmUuY3VycmVudCgpKSxkPXRoaXMuX2NvcmUuaXRlbXMoKS5sZW5ndGgsYj9jKz1lLnNsaWRlQnk6Yy09ZS5zbGlkZUJ5KSxjfSxiLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKGIpe2EucHJveHkodGhpcy5fb3ZlcnJpZGVzLnRvLHRoaXMuX2NvcmUpKHRoaXMuZ2V0UG9zaXRpb24oITApLGIpfSxiLnByb3RvdHlwZS5wcmV2PWZ1bmN0aW9uKGIpe2EucHJveHkodGhpcy5fb3ZlcnJpZGVzLnRvLHRoaXMuX2NvcmUpKHRoaXMuZ2V0UG9zaXRpb24oITEpLGIpfSxiLnByb3RvdHlwZS50bz1mdW5jdGlvbihiLGMsZCl7dmFyIGU7ZD9hLnByb3h5KHRoaXMuX292ZXJyaWRlcy50byx0aGlzLl9jb3JlKShiLGMpOihlPXRoaXMuX3BhZ2VzLmxlbmd0aCxhLnByb3h5KHRoaXMuX292ZXJyaWRlcy50byx0aGlzLl9jb3JlKSh0aGlzLl9wYWdlc1soYiVlK2UpJWVdLnN0YXJ0LGMpKX0sYS5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLk5hdmlnYXRpb249Yn0od2luZG93LlplcHRvfHx3aW5kb3cualF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjt2YXIgYz1mdW5jdGlvbihkKXt0aGlzLl9jb3JlPWQsdGhpcy5faGFzaGVzPXt9LHRoaXMuJGVsZW1lbnQ9dGhpcy5fY29yZS4kZWxlbWVudCx0aGlzLl9oYW5kbGVycz17XCJpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKCl7XCJVUkxIYXNoXCI9PXRoaXMuX2NvcmUuc2V0dGluZ3Muc3RhcnRQb3NpdGlvbiYmYShiKS50cmlnZ2VyKFwiaGFzaGNoYW5nZS5vd2wubmF2aWdhdGlvblwiKX0sdGhpcyksXCJwcmVwYXJlZC5vd2wuY2Fyb3VzZWxcIjphLnByb3h5KGZ1bmN0aW9uKGIpe3ZhciBjPWEoYi5jb250ZW50KS5maW5kKFwiW2RhdGEtaGFzaF1cIikuYW5kU2VsZihcIltkYXRhLWhhc2hdXCIpLmF0dHIoXCJkYXRhLWhhc2hcIik7dGhpcy5faGFzaGVzW2NdPWIuY29udGVudH0sdGhpcyl9LHRoaXMuX2NvcmUub3B0aW9ucz1hLmV4dGVuZCh7fSxjLkRlZmF1bHRzLHRoaXMuX2NvcmUub3B0aW9ucyksdGhpcy4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyksYShiKS5vbihcImhhc2hjaGFuZ2Uub3dsLm5hdmlnYXRpb25cIixhLnByb3h5KGZ1bmN0aW9uKCl7dmFyIGE9Yi5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSxjPXRoaXMuX2NvcmUuJHN0YWdlLmNoaWxkcmVuKCksZD10aGlzLl9oYXNoZXNbYV0mJmMuaW5kZXgodGhpcy5faGFzaGVzW2FdKXx8MDtyZXR1cm4gYT92b2lkIHRoaXMuX2NvcmUudG8oZCwhMSwhMCk6ITF9LHRoaXMpKX07Yy5EZWZhdWx0cz17VVJMaGFzaExpc3RlbmVyOiExfSxjLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGMsZDthKGIpLm9mZihcImhhc2hjaGFuZ2Uub3dsLm5hdmlnYXRpb25cIik7Zm9yKGMgaW4gdGhpcy5faGFuZGxlcnMpdGhpcy5fY29yZS4kZWxlbWVudC5vZmYoYyx0aGlzLl9oYW5kbGVyc1tjXSk7Zm9yKGQgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tkXSYmKHRoaXNbZF09bnVsbCl9LGEuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5IYXNoPWN9KHdpbmRvdy5aZXB0b3x8d2luZG93LmpRdWVyeSx3aW5kb3csZG9jdW1lbnQpO1xyXG5cclxuXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuXHJcblx0JCgnLmJ1dHRvbi11cCcpLm9uKCdjbGljaycsZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdCQoJ2JvZHksIGh0bWwnKS5hbmltYXRlKHtzY3JvbGxUb3A6IDB9LCA1MDApXHJcblx0fSk7XHJcblxyXG5cclxuXHR2YXIgb3JnRWxlbWVudFBvcyA9ICQoJy5tZW51JykucG9zaXRpb24oKTtcclxuXHRvcmdFbGVtZW50VG9wID0gb3JnRWxlbWVudFBvcy50b3A7XHJcblxyXG5cdCQoZG9jdW1lbnQpLm9uKCdzY3JvbGwnLCBzdGlja0l0KTtcclxuXHRcclxuXHRmdW5jdGlvbiBzdGlja0l0KCkge1xyXG5cdFx0aWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+PSAyMDApIHtcclxuXHRcdFx0JCgnLm1lbnUnKVxyXG5cdFx0XHRcdC5hZGRDbGFzcygnc3R1Y2snKTtcclxuXHRcdFx0JCgnLmJ1dHRvbi11cCcpLmZhZGVJbigzMDApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdCQoJy5tZW51JylcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoJ3N0dWNrJyk7XHJcblx0XHRcdCQoJy5idXR0b24tdXAnKS5mYWRlT3V0KDMwMCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQkKCcubW9iaWxlLW1lbnUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHRcdCQodGhpcykudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcclxuXHRcdCQoJy5tZW51JykudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcclxuXHRcdCQoJy5jb250YWN0c19fc2lkZWJhcl9tb2JpbGUnKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG5cdH0pXHJcblxyXG5cdCQoJy5tb2JpbGUtY29udGFjdHMnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHRcdCQodGhpcykudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcclxuXHRcdCQoJy5jb250YWN0c19fc2lkZWJhcl9tb2JpbGUnKS50b2dnbGVDbGFzcygnb3BlbicpO1xyXG5cdFx0JCgnLm1lbnUnKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG5cdFx0JCgnLm1vYmlsZS1tZW51JykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuXHR9KVxyXG5cdFxyXG4kKCcuY2xpZW50c19fbGlzdCcpLm93bENhcm91c2VsKHtcclxuXHRcclxuXHRhdXRvcGxheTp0cnVlLFxyXG5cdGF1dG9wbGF5SG92ZXJQYXVzZTp0cnVlLFxyXG5cdGxvb3A6dHJ1ZSxcclxuXHRpdGVtczogOCxcclxuXHRyZXNwb25zaXZlQ2xhc3M6dHJ1ZSxcclxuXHRkb3RzOiBmYWxzZSxcclxuXHRuYXZUZXh0OiAnJyxcclxuXHRyZXNwb25zaXZlOntcclxuXHRcdDA6e1xyXG5cdFx0XHRpdGVtczoyLFxyXG5cdFx0XHRuYXY6dHJ1ZVxyXG5cdFx0fSxcclxuXHRcdDYwMDp7XHJcblx0XHRcdGl0ZW1zOjQsXHJcblx0XHRcdG5hdjpmYWxzZVxyXG5cdFx0fSxcclxuXHRcdDEwMDA6e1xyXG5cdFx0XHRpdGVtczo1LFxyXG5cdFx0XHRuYXY6dHJ1ZVxyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcbiQoJy50aGFua3NfX2Nhcm93c2VsJykub3dsQ2Fyb3VzZWwoe1xyXG5cdFxyXG5cdGF1dG9wbGF5OjMwMDAsXHJcblx0YXV0b3BsYXlIb3ZlclBhdXNlOnRydWUsXHJcblx0bG9vcDp0cnVlLFxyXG5cdGl0ZW1zOiAxLFxyXG5cdHJlc3BvbnNpdmVDbGFzczp0cnVlLFxyXG5cdGRvdHM6IGZhbHNlXHJcbn0pO1xyXG5cclxuJCgnLm1lbnUnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcblx0XHJcblx0aWYgKCQoZS50YXJnZXQpLmhhc0NsYXNzKCdwYWdlLW5hdicpKSB7XHJcblx0XHRjb25zb2xlLmxvZyhlLnRhcmdldClcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHNob3dTZWN0aW9uKCQoZS50YXJnZXQpLmF0dHIoJ2hyZWYnKSwgdHJ1ZSk7XHJcblx0XHQkKCcubWVudScpLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XHJcblx0XHQkKCcubW9iaWxlLW1lbnUnKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG5cdH1cclxufSk7XHJcbnNob3dTZWN0aW9uKHdpbmRvdy5sb2NhdGlvbi5oYXNoLCBmYWxzZSk7XHJcblxyXG5cclxuJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcclxuXHRjaGVja1NlY3Rpb24oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBzaG93U2VjdGlvbihzZWN0aW9uLCBpc0FuaW1hdGUpIHtcclxuIHZhclxyXG5cdCBkaXJlY3Rpb24gPSBzZWN0aW9uLnJlcGxhY2UoLyMvLCAnJyksXHJcblx0IHJlcVNlY3Rpb24gPSAkKCcuc2VjdGlvbicpLmZpbHRlcignW2RhdGEtc2VjdGlvbj1cIicgKyBkaXJlY3Rpb24gKyAnXCJdJyk7XHJcblx0Y29uc29sZS5sb2coJ3NlY3Rpb24nLHJlcVNlY3Rpb24pO1xyXG4gaWYgKHJlcVNlY3Rpb24ubGVuZ3RoKSB7XHJcblx0dmFyIHJlcVNlY3Rpb25Qb3MgPSByZXFTZWN0aW9uLm9mZnNldCgpLnRvcCAtIDcwOyAgICBcclxuXHRcdCBjb25zb2xlLmxvZyhyZXFTZWN0aW9uLm9mZnNldCgpLnRvcCk7XHJcblx0IGlmIChpc0FuaW1hdGUpIHtcclxuXHRcdCAkKCdib2R5LCBodG1sJykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiByZXFTZWN0aW9uUG9zfSwgNTAwKTtcclxuXHQgfSBlbHNlIHtcclxuXHRcdCAkKCdib2R5LCBodG1sJykuc2Nyb2xsVG9wKHJlcVNlY3Rpb25Qb3MpO1xyXG5cdCB9O1xyXG59XHJcbiBcclxuXHRcdFx0XHJcblxyXG59O1xyXG5mdW5jdGlvbiBjaGVja1NlY3Rpb24oKSB7XHJcblx0JCgnLnNlY3Rpb24nKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyXHJcblx0XHRcdCR0aGlzID0gJCh0aGlzKSxcclxuXHRcdFx0dG9wRWRnZSA9ICR0aGlzLm9mZnNldCgpLnRvcCAtIDQwMCxcclxuXHRcdFx0Ym90dG9tRWRnZSA9IHRvcEVkZ2UgKyAkdGhpcy5oZWlnaHQoKSxcclxuXHRcdFx0d1Njcm9sbCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuXHRcdGlmICh0b3BFZGdlIDwgd1Njcm9sbCAmJiBib3R0b21FZGdlICA+IHdTY3JvbGwpIHtcclxuXHRcdFx0dmFyXHJcblx0XHRcdFx0Y3VycmVudElkID0gJHRoaXMuZGF0YSgnc2VjdGlvbicpLFxyXG5cdFx0XHRcdHJlcUxpbmsgPSAkKCcubWVudV9fbGluaycpLmZpbHRlcignW2hyZWY9XCIjJyArIGN1cnJlbnRJZCArICdcIl0nKTtcclxuXHRcdFx0cmVxTGlua1xyXG5cdFx0XHRcdC5jbG9zZXN0KCcubWVudV9faXRlbScpXHJcblx0XHRcdFx0LmFkZENsYXNzKCdhY3RpdmUnKVxyXG5cdFx0XHRcdC5zaWJsaW5ncygpXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcdFxyXG5cdFx0XHQvLyAkKCcuc2VjdGlvbicpLmZpbHRlcignLnNlY3Rpb25fJyArIGN1cnJlbnRJZCkuY3NzKCdvcGFjaXR5JywgJzEnKS5jc3MoJ2xlZnQnLCAnMCcpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxuXHJcblxyXG52YXIgJG92ZXJsYXkgPSAkKCc8ZGl2IGlkPVwib3ZlcmxheVwiPjwvZGl2PicpO1xyXG52YXIgJGltYWdlID0gJChcIjxpbWc+XCIpO1xyXG5cclxuLy9BbiBpbWFnZSB0byBvdmVybGF5XHJcbiRvdmVybGF5LmFwcGVuZCgkaW1hZ2UpO1xyXG5cclxuLy9BZGQgb3ZlcmxheVxyXG4kKFwiLmNvbnRlbnRfX3dyYXBwZXJfdGhhbmtzXCIpLmFwcGVuZCgkb3ZlcmxheSk7XHJcblxyXG4gIC8vY2xpY2sgdGhlIGltYWdlIGFuZCBhIHNjYWxlZCB2ZXJzaW9uIG9mIHRoZSBmdWxsIHNpemUgaW1hZ2Ugd2lsbCBhcHBlYXJcclxuICAkKFwiI3Bob3RvLWdhbGxlcnkgYVwiKS5jbGljayggZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRjb25zb2xlLmxvZygnc2hvdyBpbWcnKTtcclxuXHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdHZhciBpbWFnZUxvY2F0aW9uID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcclxuXHJcblx0Ly91cGRhdGUgb3ZlcmxheSB3aXRoIHRoZSBpbWFnZSBsaW5rZWQgaW4gdGhlIGxpbmtcclxuXHQkaW1hZ2UuYXR0cihcInNyY1wiLCBpbWFnZUxvY2F0aW9uKTtcclxuXHJcblx0Ly9zaG93IHRoZSBvdmVybGF5XHJcblx0JG92ZXJsYXkuZmFkZUluKDIwMCk7XHJcbiAgfSApO1xyXG5cclxuICAkKFwiI292ZXJsYXlcIikuY2xpY2soZnVuY3Rpb24oKSB7XHJcblx0JCggXCIjb3ZlcmxheVwiICkuZmFkZU91dCgxMDApO1xyXG4gIH0pO1xyXG5cdFx0XHJcbn0pO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcblx0dmFyIG1hcDtcclxuXHJcblx0XHRERy50aGVuKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRtYXAgPSBERy5tYXAoJ21hcCcsIHtcclxuXHRcdFx0XHRcdFx0Y2VudGVyOiBbNTQuOTk3NDQ0LCA3My4zODI2NDhdLFxyXG5cdFx0XHRcdFx0XHR6b29tOiAxOCxcclxuXHRcdFx0XHRcdFx0Ly8gcGtnOiAnYmFzaWMnLFxyXG5cdFx0XHRcdFx0XHR3YXRjaDogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0c2tpbjogJ2xpZ2h0JyxcclxuXHRcdFx0XHRcdFx0ZnVsbHNjcmVlbkNvbnRyb2w6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRzY3JvbGxXaGVlbFpvb206IGZhbHNlXHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdERHLm1hcmtlcihbNTQuOTk3NTQwLCA3My4zODExNjVdKS5hZGRUbyhtYXApLmJpbmRQb3B1cCgn0K/RgNC60LjQuSDQvNC40YAnKTtcclxuXHRcdH0pO1xyXG5cdHZhciAkc2xpZGVyID0gJChcIi5zbGlkZXJcIiksXHJcblx0XHRcdCRzbGlkZUJHcyA9ICQoXCIuc2xpZGVfX2JnXCIpLFxyXG5cdFx0XHRkaWZmID0gMCxcclxuXHRcdFx0Y3VyU2xpZGUgPSAwLFxyXG5cdFx0XHRudW1PZlNsaWRlcyA9ICQoXCIuc2xpZGVcIikubGVuZ3RoLTEsXHJcblx0XHRcdGFuaW1hdGluZyA9IGZhbHNlLFxyXG5cdFx0XHRhbmltVGltZSA9IDUwMCxcclxuXHRcdFx0YXV0b1NsaWRlVGltZW91dCxcclxuXHRcdFx0YXV0b1NsaWRlRGVsYXkgPSA2MDAwLFxyXG5cdFx0XHQkcGFnaW5hdGlvbiA9ICQoXCIuc2xpZGVyLXBhZ2lcIik7XHJcblx0XHJcblx0ZnVuY3Rpb24gY3JlYXRlQnVsbGV0cygpIHtcclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbnVtT2ZTbGlkZXMrMTsgaSsrKSB7XHJcblx0XHRcdHZhciAkbGkgPSAkKFwiPGxpIGNsYXNzPSdzbGlkZXItcGFnaV9fZWxlbSc+PC9saT5cIik7XHJcblx0XHRcdCRsaS5hZGRDbGFzcyhcInNsaWRlci1wYWdpX19lbGVtLVwiK2kpLmRhdGEoXCJwYWdlXCIsIGkpO1xyXG5cdFx0XHRpZiAoIWkpICRsaS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdFx0JHBhZ2luYXRpb24uYXBwZW5kKCRsaSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHRcclxuXHRjcmVhdGVCdWxsZXRzKCk7XHJcblx0XHJcblx0ZnVuY3Rpb24gbWFuYWdlQ29udHJvbHMoKSB7XHJcblx0XHQkKFwiLnNsaWRlci1jb250cm9sXCIpLnJlbW92ZUNsYXNzKFwiaW5hY3RpdmVcIik7XHJcblx0XHRpZiAoIWN1clNsaWRlKSAkKFwiLnNsaWRlci1jb250cm9sLmxlZnRcIikuYWRkQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuXHRcdGlmIChjdXJTbGlkZSA9PT0gbnVtT2ZTbGlkZXMpICQoXCIuc2xpZGVyLWNvbnRyb2wucmlnaHRcIikuYWRkQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcclxuXHR9O1xyXG5cdFxyXG5cdGZ1bmN0aW9uIGF1dG9TbGlkZSgpIHtcclxuXHRcdGF1dG9TbGlkZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRjdXJTbGlkZSsrO1xyXG5cdFx0XHRpZiAoY3VyU2xpZGUgPiBudW1PZlNsaWRlcykgY3VyU2xpZGUgPSAwO1xyXG5cdFx0XHRjaGFuZ2VTbGlkZXMoKTtcclxuXHRcdH0sIGF1dG9TbGlkZURlbGF5KTtcclxuXHR9O1xyXG5cdFxyXG5cdGF1dG9TbGlkZSgpO1xyXG5cdFxyXG5cdGZ1bmN0aW9uIGNoYW5nZVNsaWRlcyhpbnN0YW50KSB7XHJcblx0XHRpZiAoIWluc3RhbnQpIHtcclxuXHRcdFx0YW5pbWF0aW5nID0gdHJ1ZTtcclxuXHRcdFx0bWFuYWdlQ29udHJvbHMoKTtcclxuXHRcdFx0JHNsaWRlci5hZGRDbGFzcyhcImFuaW1hdGluZ1wiKTtcclxuXHRcdFx0JHNsaWRlci5jc3MoXCJ0b3BcIik7XHJcblx0XHRcdCQoXCIuc2xpZGVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcblx0XHRcdCQoXCIuc2xpZGUtXCIrY3VyU2xpZGUpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCRzbGlkZXIucmVtb3ZlQ2xhc3MoXCJhbmltYXRpbmdcIik7XHJcblx0XHRcdFx0YW5pbWF0aW5nID0gZmFsc2U7XHJcblx0XHRcdH0sIGFuaW1UaW1lKTtcclxuXHRcdH1cclxuXHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoYXV0b1NsaWRlVGltZW91dCk7XHJcblx0XHQkKFwiLnNsaWRlci1wYWdpX19lbGVtXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG5cdFx0JChcIi5zbGlkZXItcGFnaV9fZWxlbS1cIitjdXJTbGlkZSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcblx0XHQkc2xpZGVyLmNzcyhcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZTNkKFwiKyAtY3VyU2xpZGUqMTAwICtcIiUsMCwwKVwiKTtcclxuXHRcdCRzbGlkZUJHcy5jc3MoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUzZChcIisgY3VyU2xpZGUqNTAgK1wiJSwwLDApXCIpO1xyXG5cdFx0ZGlmZiA9IDA7XHJcblx0XHRhdXRvU2xpZGUoKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIG5hdmlnYXRlTGVmdCgpIHtcclxuXHRcdGlmIChhbmltYXRpbmcpIHJldHVybjtcclxuXHRcdGlmIChjdXJTbGlkZSA+IDApIGN1clNsaWRlLS07XHJcblx0XHRjaGFuZ2VTbGlkZXMoKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIG5hdmlnYXRlUmlnaHQoKSB7XHJcblx0XHRpZiAoYW5pbWF0aW5nKSByZXR1cm47XHJcblx0XHRpZiAoY3VyU2xpZGUgPCBudW1PZlNsaWRlcykgY3VyU2xpZGUrKztcclxuXHRcdGNoYW5nZVNsaWRlcygpO1xyXG5cdH1cclxuXHJcblx0JChkb2N1bWVudCkub24oXCJtb3VzZWRvd24gdG91Y2hzdGFydFwiLCBcIi5zbGlkZXJcIiwgZnVuY3Rpb24oZSkge1xyXG5cdFx0aWYgKGFuaW1hdGluZykgcmV0dXJuO1xyXG5cdFx0d2luZG93LmNsZWFyVGltZW91dChhdXRvU2xpZGVUaW1lb3V0KTtcclxuXHRcdHZhciBzdGFydFggPSBlLnBhZ2VYIHx8IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VYLFxyXG5cdFx0XHRcdHdpblcgPSAkKHdpbmRvdykud2lkdGgoKTtcclxuXHRcdGRpZmYgPSAwO1xyXG5cdFx0XHJcblx0XHQkKGRvY3VtZW50KS5vbihcIm1vdXNlbW92ZSB0b3VjaG1vdmVcIiwgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHR2YXIgeCA9IGUucGFnZVggfHwgZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVg7XHJcblx0XHRcdGRpZmYgPSAoc3RhcnRYIC0geCkgLyB3aW5XICogNzA7XHJcblx0XHRcdGlmICgoIWN1clNsaWRlICYmIGRpZmYgPCAwKSB8fCAoY3VyU2xpZGUgPT09IG51bU9mU2xpZGVzICYmIGRpZmYgPiAwKSkgZGlmZiAvPSAyO1xyXG5cdFx0XHQkc2xpZGVyLmNzcyhcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZTNkKFwiKyAoLWN1clNsaWRlKjEwMCAtIGRpZmYpICtcIiUsMCwwKVwiKTtcclxuXHRcdFx0JHNsaWRlQkdzLmNzcyhcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZTNkKFwiKyAoY3VyU2xpZGUqNTAgKyBkaWZmLzIpICtcIiUsMCwwKVwiKTtcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG5cdFxyXG5cdCQoZG9jdW1lbnQpLm9uKFwibW91c2V1cCB0b3VjaGVuZFwiLCBmdW5jdGlvbihlKSB7XHJcblx0XHQkKGRvY3VtZW50KS5vZmYoXCJtb3VzZW1vdmUgdG91Y2htb3ZlXCIpO1xyXG5cdFx0aWYgKGFuaW1hdGluZykgcmV0dXJuO1xyXG5cdFx0aWYgKCFkaWZmKSB7XHJcblx0XHRcdGNoYW5nZVNsaWRlcyh0cnVlKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGRpZmYgPiAtOCAmJiBkaWZmIDwgOCkge1xyXG5cdFx0XHRjaGFuZ2VTbGlkZXMoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGRpZmYgPD0gLTgpIHtcclxuXHRcdFx0bmF2aWdhdGVMZWZ0KCk7XHJcblx0XHR9XHJcblx0XHRpZiAoZGlmZiA+PSA4KSB7XHJcblx0XHRcdG5hdmlnYXRlUmlnaHQoKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRcclxuXHQkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIFwiLnNsaWRlci1jb250cm9sXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCQodGhpcykuaGFzQ2xhc3MoXCJsZWZ0XCIpKSB7XHJcblx0XHRcdG5hdmlnYXRlTGVmdCgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bmF2aWdhdGVSaWdodCgpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdFxyXG5cdCQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCIuc2xpZGVyLXBhZ2lfX2VsZW1cIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRjdXJTbGlkZSA9ICQodGhpcykuZGF0YShcInBhZ2VcIik7XHJcblx0XHRjaGFuZ2VTbGlkZXMoKTtcclxuXHR9KTtcclxuXHRcclxufSk7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cdCQoXCIjZm9ybVwiKS5zdWJtaXQoZnVuY3Rpb24oKSB7IC8v0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0YHQvtCx0YvRgtC40LUg0L7RgtC/0YDQsNCy0LrQuCDQtNC70Y8g0YTQvtGA0LzRiyDRgSBpZD1mb3JtXHJcblx0XHR2YXIgZm9ybV9kYXRhID0gJCh0aGlzKS5zZXJpYWxpemUoKTsgLy/RgdC+0LHQtdGA0LDQtdC8INCy0YHQtSDQtNCw0L3QvdGL0LUg0LjQtyDRhNC+0YDQvNGLXHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR0eXBlOiBcIlBPU1RcIiwgLy/QnNC10YLQvtC0INC+0YLQv9GA0LDQstC60LhcclxuXHRcdFx0dXJsOiBcInNlbmQucGhwXCIsIC8v0L/Rg9GC0Ywg0LTQviBwaHAg0YTQsNC40LvQsCDQvtGC0L/RgNCw0LLQuNGC0LXQu9GPXHJcblx0XHRcdGRhdGE6IGZvcm1fZGF0YSxcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdGFsZXJ0KFwi0JLQsNGI0LUg0YHQvtC+0LHRidC10L3QuNC1INC+0YLQv9GA0LLQu9C10L3QviFcIik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9KTtcclxufSk7XHJcblxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
